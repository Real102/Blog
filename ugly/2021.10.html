<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>笔记 | WolfBerry</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="WolfBerry's Blog">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.582bb75b.css" as="style"><link rel="preload" href="/Blog/assets/js/app.26c94a5c.js" as="script"><link rel="preload" href="/Blog/assets/js/2.b2fff99d.js" as="script"><link rel="preload" href="/Blog/assets/js/9.db5433a8.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.07ed30bc.js"><link rel="prefetch" href="/Blog/assets/js/11.4405ba45.js"><link rel="prefetch" href="/Blog/assets/js/12.21f3d656.js"><link rel="prefetch" href="/Blog/assets/js/13.6282d122.js"><link rel="prefetch" href="/Blog/assets/js/14.6d0c4961.js"><link rel="prefetch" href="/Blog/assets/js/15.4904075b.js"><link rel="prefetch" href="/Blog/assets/js/16.3318e70c.js"><link rel="prefetch" href="/Blog/assets/js/17.126dec48.js"><link rel="prefetch" href="/Blog/assets/js/18.f3baeba3.js"><link rel="prefetch" href="/Blog/assets/js/19.d9a0b707.js"><link rel="prefetch" href="/Blog/assets/js/20.4b9c544c.js"><link rel="prefetch" href="/Blog/assets/js/21.82d0e7f1.js"><link rel="prefetch" href="/Blog/assets/js/22.42b8ae09.js"><link rel="prefetch" href="/Blog/assets/js/23.c676b601.js"><link rel="prefetch" href="/Blog/assets/js/24.6e1c47f1.js"><link rel="prefetch" href="/Blog/assets/js/25.310dad1a.js"><link rel="prefetch" href="/Blog/assets/js/26.a7745fbc.js"><link rel="prefetch" href="/Blog/assets/js/27.e451bb4b.js"><link rel="prefetch" href="/Blog/assets/js/28.51707047.js"><link rel="prefetch" href="/Blog/assets/js/29.edfaf11e.js"><link rel="prefetch" href="/Blog/assets/js/3.60a6da4e.js"><link rel="prefetch" href="/Blog/assets/js/30.e25e4396.js"><link rel="prefetch" href="/Blog/assets/js/31.c06c845b.js"><link rel="prefetch" href="/Blog/assets/js/32.cdc8bf6c.js"><link rel="prefetch" href="/Blog/assets/js/33.3de22c63.js"><link rel="prefetch" href="/Blog/assets/js/34.b56e280b.js"><link rel="prefetch" href="/Blog/assets/js/35.4d6ccb74.js"><link rel="prefetch" href="/Blog/assets/js/36.a729c293.js"><link rel="prefetch" href="/Blog/assets/js/37.48a8f1df.js"><link rel="prefetch" href="/Blog/assets/js/38.69b10e03.js"><link rel="prefetch" href="/Blog/assets/js/39.62484b18.js"><link rel="prefetch" href="/Blog/assets/js/4.8dfc73e1.js"><link rel="prefetch" href="/Blog/assets/js/40.7b5c5c55.js"><link rel="prefetch" href="/Blog/assets/js/41.73c45021.js"><link rel="prefetch" href="/Blog/assets/js/42.9f3fc2e2.js"><link rel="prefetch" href="/Blog/assets/js/43.a4bee912.js"><link rel="prefetch" href="/Blog/assets/js/44.acb8c2a6.js"><link rel="prefetch" href="/Blog/assets/js/45.d02eb0a9.js"><link rel="prefetch" href="/Blog/assets/js/46.7f053f0a.js"><link rel="prefetch" href="/Blog/assets/js/47.46c8786e.js"><link rel="prefetch" href="/Blog/assets/js/48.19b67883.js"><link rel="prefetch" href="/Blog/assets/js/49.ce6aa35d.js"><link rel="prefetch" href="/Blog/assets/js/5.b9636d6c.js"><link rel="prefetch" href="/Blog/assets/js/50.2497754c.js"><link rel="prefetch" href="/Blog/assets/js/51.e1c78dcc.js"><link rel="prefetch" href="/Blog/assets/js/52.89262c74.js"><link rel="prefetch" href="/Blog/assets/js/53.47860fb3.js"><link rel="prefetch" href="/Blog/assets/js/54.4d1f45ac.js"><link rel="prefetch" href="/Blog/assets/js/55.b2dac113.js"><link rel="prefetch" href="/Blog/assets/js/56.34c7045e.js"><link rel="prefetch" href="/Blog/assets/js/57.d614f134.js"><link rel="prefetch" href="/Blog/assets/js/58.e88fc109.js"><link rel="prefetch" href="/Blog/assets/js/59.d386972e.js"><link rel="prefetch" href="/Blog/assets/js/6.e72b2b73.js"><link rel="prefetch" href="/Blog/assets/js/60.a3d054ef.js"><link rel="prefetch" href="/Blog/assets/js/61.27b0d020.js"><link rel="prefetch" href="/Blog/assets/js/62.742bc712.js"><link rel="prefetch" href="/Blog/assets/js/63.0cf87451.js"><link rel="prefetch" href="/Blog/assets/js/64.ee8cefe2.js"><link rel="prefetch" href="/Blog/assets/js/65.2a3e00d6.js"><link rel="prefetch" href="/Blog/assets/js/66.c16d7376.js"><link rel="prefetch" href="/Blog/assets/js/67.22d5664d.js"><link rel="prefetch" href="/Blog/assets/js/68.3163821e.js"><link rel="prefetch" href="/Blog/assets/js/69.ba149287.js"><link rel="prefetch" href="/Blog/assets/js/7.8d9b6daa.js"><link rel="prefetch" href="/Blog/assets/js/70.79b3941c.js"><link rel="prefetch" href="/Blog/assets/js/71.9633a5fc.js"><link rel="prefetch" href="/Blog/assets/js/72.0a582a8b.js"><link rel="prefetch" href="/Blog/assets/js/8.f72dab87.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.582bb75b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">WolfBerry</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/Blog/ugly/" class="nav-link router-link-active">
  Ugly
</a></div><div class="nav-item"><a href="/Blog/gold/" class="nav-link">
  Gold
</a></div><div class="nav-item"><a href="/Blog/diary/" class="nav-link">
  Diary
</a></div> <a href="https://github.com/Real102/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/Blog/ugly/" class="nav-link router-link-active">
  Ugly
</a></div><div class="nav-item"><a href="/Blog/gold/" class="nav-link">
  Gold
</a></div><div class="nav-item"><a href="/Blog/diary/" class="nav-link">
  Diary
</a></div> <a href="https://github.com/Real102/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Ugly</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/ugly/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/Blog/ugly/2021.8.html" class="sidebar-link">2021.8</a></li><li><a href="/Blog/ugly/2021.9.html" class="sidebar-link">2021.9</a></li><li><a href="/Blog/ugly/2021.10.html" aria-current="page" class="active sidebar-link">2021.10</a></li><li><a href="/Blog/ugly/2021.11.html" class="sidebar-link">2021.11</a></li><li><a href="/Blog/ugly/2021.12.html" class="sidebar-link">2021.12</a></li><li><a href="/Blog/ugly/2022.1.html" class="sidebar-link">2022.1</a></li><li><a href="/Blog/ugly/2022.2.html" class="sidebar-link">2022.2</a></li><li><a href="/Blog/ugly/2022.3.html" class="sidebar-link">2022.3</a></li><li><a href="/Blog/ugly/2022.4.html" class="sidebar-link">2022.4</a></li><li><a href="/Blog/ugly/2022.5.html" class="sidebar-link">2022.5</a></li><li><a href="/Blog/ugly/2022.6.html" class="sidebar-link">2022.6</a></li><li><a href="/Blog/ugly/2022.7.html" class="sidebar-link">2022.7</a></li><li><a href="/Blog/ugly/2023.1.html" class="sidebar-link">2023.1</a></li><li><a href="/Blog/ugly/2023.2.html" class="sidebar-link">2023.2</a></li><li><a href="/Blog/ugly/测试用例.html" class="sidebar-link">测试用例</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="笔记"><a href="#笔记" class="header-anchor">#</a> 笔记</h1> <h2 id="_2021-年-10-月-1-日"><a href="#_2021-年-10-月-1-日" class="header-anchor">#</a> 2021 年 10 月 1 日</h2> <h3 id="ref、reactive-10-28-补"><a href="#ref、reactive-10-28-补" class="header-anchor">#</a> ref、reactive（10.28 补）</h3> <p>composition API 下定义基本数据类型和对象的方式...</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

<span class="token keyword">const</span> listData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">&quot;123&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">&quot;234&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>listData<span class="token punctuation">)</span>
</code></pre></div><p>em...用着是真的有点麻烦：</p> <ul><li><code>ref</code> 定义变量要通过 <code>.value</code> 来访问值（但通过 <code>return</code> 返回的会自动浅解包）</li> <li>打印 <code>reactive</code> 对象到控制台的样子挺怪的，不直观</li></ul> <p><img src="/Blog/assets/img/reactive.8d8a2034.png" alt="reactive.png" title="reactive.png"></p> <h2 id="_2021-年-10-月-2-日"><a href="#_2021-年-10-月-2-日" class="header-anchor">#</a> 2021 年 10 月 2 日</h2> <h3 id="vue2-vs-vue3-周期函数-11-4-补"><a href="#vue2-vs-vue3-周期函数-11-4-补" class="header-anchor">#</a> vue2 vs vue3 周期函数（11.4 补）</h3> <p>新增：</p> <ul><li>beforeUnmount：在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的。</li> <li>unmounted：卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。</li> <li>renderTracked：跟踪虚拟 <code>DOM</code> 重新渲染时调用。钩子接收 <code>debugger event</code> 作为参数。此事件告诉你哪个操作跟踪了组件以及该操作的目标对象和键。</li> <li>renderTriggered：当虚拟 <code>DOM</code> 重新渲染被触发时调用。和 <code>renderTracked</code> 类似，接收 <code>debugger event</code> 作为参数。此事件告诉你是什么操作触发了重新渲染，以及该操作的目标对象和键。</li></ul> <p>删除：</p> <ul><li>beforeDestory</li> <li>destoryed</li></ul> <p>准确的说，应该是 <code>beforeDestory</code> 和 <code>destoryed</code> 改成了 <code>beforeUnmount</code> 和 <code>unmounted</code>，并且新增了两个钩子函数用于追踪数据的变化</p> <p>注意在 <code>vue3</code> 的 <code>composition API</code> 中，是没有 <code>beforeCreate</code> 和 <code>create</code> 这两个钩子函数，只有 <code>setup</code>，并且 <code>composition API</code> 中是用 <code>onX</code> 来注册对应的钩子函数</p> <h2 id="_2021-年-10-月-3-日"><a href="#_2021-年-10-月-3-日" class="header-anchor">#</a> 2021 年 10 月 3 日</h2> <h3 id="自定义指令-11-5-补"><a href="#自定义指令-11-5-补" class="header-anchor">#</a> 自定义指令（11.5 补）</h3> <p><code>vue3</code> 相较于 <code>vue2</code>，在钩子函数上做了一些改动，为了更好的跟生命周期钩子函数保持一致；除此之外，参数中 <code>expression</code>（字符串形式的指令表达式如：'<code>1+1</code>'） 将不在使用</p> <p>（幸好常用的几个钩子变化不大 🤣）</p> <p><code>vue3</code> 指令钩子函数：</p> <ul><li><code>created</code> - 新增！在元素的 attribute 或事件监听器被应用之前调用。</li> <li><code>bind</code> → <code>beforeMount</code></li> <li><code>inserted</code> → <code>mounted</code></li> <li><code>beforeUpdate</code>：新增！在元素本身被更新之前调用，与组件的生命周期钩子十分相似。</li> <li><code>update</code> → 移除！该钩子与 updated 有太多相似之处，因此它是多余的。请改用 updated。</li> <li><code>componentUpdated</code> → <code>updated</code></li> <li><code>beforeUnmount</code>：新增！与组件的生命周期钩子类似，它将在元素被卸载之前调用。</li> <li><code>unbind</code> -&gt; <code>unmounted</code></li></ul> <h2 id="_2021-年-10-月-4-日"><a href="#_2021-年-10-月-4-日" class="header-anchor">#</a> 2021 年 10 月 4 日</h2> <h2 id="devtools-beta-11-15-补"><a href="#devtools-beta-11-15-补" class="header-anchor">#</a> Devtools Beta（11.15 补）</h2> <p>如果发现自己的 <code>vue3</code> 项目不能使用 <code>Devtools</code> 了，试试安装一下 <code>beta</code> 版的开发者工具吧</p> <p>下载地址：<a href="https://chrome.zzzmh.cn/info?token=ljjemllljcmogpfapbkkighbhhppjdbg" target="_blank" rel="noopener noreferrer">点这里 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2021-年-10-月-5-日"><a href="#_2021-年-10-月-5-日" class="header-anchor">#</a> 2021 年 10 月 5 日</h2> <h3 id="http-缓存"><a href="#http-缓存" class="header-anchor">#</a> HTTP 缓存</h3> <h4 id="http1-0"><a href="#http1-0" class="header-anchor">#</a> HTTP1.0</h4> <p><code>Expires</code>：即过期时间，存在 <code>RH</code> 中，在这个时间之前可以直接从缓存中获取数据</p> <p><code>Last-Modified</code>：资源的最后修改时间</p> <p><code>If-Modified-Since</code>：协商缓存过程中，请求头会增加 <code>If-Modified-Since</code> 字段用于携带 <code>Last-Modified</code> 的值</p> <h4 id="http1-1"><a href="#http1-1" class="header-anchor">#</a> HTTP1.1</h4> <p><code>Cache-Control</code></p> <ul><li><code>max-age（s）</code>：代表资源在**秒内有效</li> <li><code>public</code>：表示客户端和服务端都可以缓存</li> <li><code>private</code>：只有浏览器可以缓存</li> <li><code>no-catch</code>：跳过强缓存，直接进入协商缓存阶段</li> <li><code>no-store</code>：不进行任何方式的缓存</li> <li><code>s-maxage</code>：针对代理服务器的缓存时间</li></ul> <p><code>ETag</code>：资源文件的唯一标识</p> <p><code>If-None-Match</code>：协商缓存过程中，请求头会增加 <code>If-None-Match</code> 字段用于携带 <code>ETag</code> 的值</p> <h4 id="缓存位置"><a href="#缓存位置" class="header-anchor">#</a> 缓存位置</h4> <ul><li>比较大的 <code>JS</code>、<code>CSS</code> 文件会被丢进磁盘，反之丢进内存</li> <li>内存使用率比较高的时候，文件优先进入磁盘</li></ul> <h2 id="_2021-年-10-月-6-日"><a href="#_2021-年-10-月-6-日" class="header-anchor">#</a> 2021 年 10 月 6 日</h2> <h3 id="输入框自动填充样式优化-11-23-补"><a href="#输入框自动填充样式优化-11-23-补" class="header-anchor">#</a> 输入框自动填充样式优化（11.23 补）</h3> <p>有时写表单时会发现谷歌会自动填充，并且样式还贼丑。可以试试下面的 css 代码，保证恢复如初</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input:focus:-webkit-autofill,
input:-webkit-autofill</span> <span class="token punctuation">{</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0px 0 #fff inset<span class="token punctuation">;</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0px 0 #fff inset <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> background-color 500000s ease-in-out 50000s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2021-年-10-月-7-日"><a href="#_2021-年-10-月-7-日" class="header-anchor">#</a> 2021 年 10 月 7 日</h2> <h3 id="unicode-与字符的相互转换-12-2-补"><a href="#unicode-与字符的相互转换-12-2-补" class="header-anchor">#</a> Unicode 与字符的相互转换（12.2 补）</h3> <p><code>String.fromCharCode()</code>：<code>ES5</code> 语法，只能返回码点小于 <code>0xFFFF</code> 的字符
<code>String.fromCodePoint()</code>：<code>ES6</code> 语法，支持识别大于 <code>0xFFFF</code> 的字符</p> <p><code>charCodeAt()</code>：<code>ES5</code> 语法，返回指定下标字符的十进制码点，同样只能小于 <code>65535</code> 的字符
<code>codePointAt()</code>：<code>ES6</code> 语法，返回指定下标的十进制码点，支持识别大于 <code>65535</code> 的字符（需要使用 <code>tostring</code> 方法转换成真正的十六进制码点）</p> <p>为什么是 <code>FFFF</code>？因为 <code>JavaScript</code> 内部，字符是以 <code>utf-16</code> 的格式存储，每个字符站 <code>2</code> 个字节，一个字节等于 <code>8</code> 位，即共 <code>16</code> 位（二进制），转换成十六进制就变成了 <code>FFFF</code></p> <h2 id="_2021-年-10-月-8-日"><a href="#_2021-年-10-月-8-日" class="header-anchor">#</a> 2021 年 10 月 8 日</h2> <h3 id="es6-新增的字符串方法-12-2-补"><a href="#es6-新增的字符串方法-12-2-补" class="header-anchor">#</a> ES6 新增的字符串方法（12.2 补）</h3> <ul><li><code>includes</code>：判断是否包含字符串</li> <li><code>startsWith</code>：判断是否以某字符串开头</li> <li><code>endsWith</code>：判断是否以某字符串结尾</li> <li><code>repeat</code>：重复字符串，参数为重复次数</li> <li><code>padStart</code>：参数为（<code>len</code>, <code>str</code>），指定某字符串以 <code>str</code> 在头部补足到 <code>len</code> 长度</li> <li><code>padEnd</code>：参数为（<code>len</code>, <code>str</code>），指定某字符串以 <code>str</code> 在尾部补足到 <code>len</code> 长度</li> <li><code>trimStart</code>：消除头部的空格</li> <li><code>trimEnd</code>：消除尾部的空格</li> <li><code>replaceAll</code>：参数为(<code>searchValue</code>, <code>replacement</code>)，全局替换 <code>searchValue</code> 为 <code>replacement</code>，返回一个新的字符串，不改变原先的字符串</li></ul> <h2 id="_2021-年-10-月-9-日"><a href="#_2021-年-10-月-9-日" class="header-anchor">#</a> 2021 年 10 月 9 日</h2> <h3 id="es6-数值相关方法-12-2-补"><a href="#es6-数值相关方法-12-2-补" class="header-anchor">#</a> ES6 数值相关方法（12.2 补）</h3> <ul><li><code>Math.pow</code> 是计算某个数的 <code>n</code> 平方，可以用 <code>**</code> 代替</li> <li><code>Number.isFinite</code>：判断是否有限</li> <li><code>Number.isNaN</code>：判断是否为 <code>NaN</code></li> <li><code>Number.parseInt()</code>：ES6 将该全局方法移植到 <code>number</code> 对象，使逐步模块化</li> <li><code>Number.parseFloat()</code>：ES6 将该全局方法移植到 <code>number</code> 对象，使逐步模块化</li> <li><code>Number.isInteger()</code>：判断是否为整数</li></ul> <p><strong>Tips</strong>: <code>Number.isNaN()</code> 跟传统的 <code>isNaN()</code> 方法仍有点区别，后者会先调用 <code>Number()</code> 方法转换成数值后，再执行 <code>isNaN()</code> 方法（<code>isFinite()</code> 方法同）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;NaN&quot;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;NaN&quot;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="_2021-年-10-月-10-日"><a href="#_2021-年-10-月-10-日" class="header-anchor">#</a> 2021 年 10 月 10 日</h2> <h3 id="_0-1-0-2-问题-12-3-补"><a href="#_0-1-0-2-问题-12-3-补" class="header-anchor">#</a> 0.1 + 0.2 问题（12.3 补）</h3> <p><code>JavaScript</code> 采用 <code>IEEE754</code> 标准，数值存储为 <code>64</code> 位双精度格式，数值精度最多可以达到 <code>53</code> 个二进制位（<code>1</code> 个隐藏位与 <code>52</code> 个有效位），超过了就会别丢弃。</p> <p><code>0.1</code> 用二进制表示为：<code>0.1.toString(2)</code> -&gt; <code>0.00011001100...</code> <code>0.2</code> 用二进制表示为：<code>0.2.toString(2)</code> -&gt; <code>0.00110011001...</code></p> <p>相加得出 <code>0.010011001100...</code>，最终得出的值为 <code>0.30000000000000004 ≠ 0.3</code></p> <p>参考文档：<a href="https://draveness.me/whys-the-design-floating-point-arithmetic/" target="_blank" rel="noopener noreferrer">为什么 0.1 + 0.2 = 0.300000004 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如何解决？</p> <ul><li>转成整数再相加</li> <li>使用 <a href="https://real102.github.io/Blog/ugly/2021.10.html#number-epsilon-12-6-%E8%A1%A5" target="_blank" rel="noopener noreferrer">Number.EPSILON 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2021-年-10-月-11-日"><a href="#_2021-年-10-月-11-日" class="header-anchor">#</a> 2021 年 10 月 11 日</h2> <h3 id="changeorigin"><a href="#changeorigin" class="header-anchor">#</a> changeOrigin</h3> <p><code>proxy</code> 代理的选项之一，默认值为 <code>false</code>，会保留主机头的来源。即后端获取到接口请求头中的 <code>host</code> 值即为 <code>devServer</code> 下 <code>host</code> 的值</p> <p><img src="/Blog/assets/img/changeOrigin-false.121a95b9.png" alt="changeOrigin-false" title="changeOrigin-false"></p> <p>若设置为 <code>true</code>，则 <code>host</code> 值为 <code>proxy</code> 下 <code>target</code> 的值</p> <p><img src="/Blog/assets/img/changeOrigin-true.bf33416f.png" alt="changeOrigin-true" title="changeOrigin-true"></p> <p>因此（<span style="color:rgb(192, 52, 29);"><strong>猜测</strong></span>）可以设置 <code>changeOrigin</code> 为 <code>true</code>，绕过后端的 <code>host</code> 检查</p> <h2 id="_2021-年-10-月-12-日"><a href="#_2021-年-10-月-12-日" class="header-anchor">#</a> 2021 年 10 月 12 日</h2> <h3 id="git-hook"><a href="#git-hook" class="header-anchor">#</a> Git Hook</h3> <p>在提交代码到 <code>gitlab</code> 时，增加一层 <code>hook</code> 限制</p> <p><code>vue-cli</code> 创建的项目会自动安装 <code>yorkie</code>（<code>fork</code> 自 <code>husky</code>，但与后者不兼容）搭配 <code>lint-staged</code> 即可实现在 <code>git add</code> 时先 <code>run lint</code>（<span style="font-size:10px;color:rgb(192, 52, 29);">妈妈再也不用担心代码给人搞乱了</span> 😎）</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;gitHooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vue-cli-service lint&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;git add&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：<code>lint-staged</code> 需要 <code>node12.13.0+</code> 的版本才能正常使用</p> <p>问题：</p> <ul><li><code>eslint</code> 校验结果为 <code>warning</code> 的也可以提交到 <code>gitlab</code>？</li></ul> <h2 id="_2021-年-10-月-13-日"><a href="#_2021-年-10-月-13-日" class="header-anchor">#</a> 2021 年 10 月 13 日</h2> <h3 id="number-epsilon-12-6-补"><a href="#number-epsilon-12-6-补" class="header-anchor">#</a> Number.EPSILON（12.6 补）</h3> <p><code>ES6</code> 在 <code>Number</code> 对象上新增了一个极小的<strong>常量</strong> <code>Number.EPSILON</code>，它表示 <code>1</code> 与大于 <code>1</code> 的最小浮点数之间的差，相当于 <code>2</code> 的 <code>-52</code> 次方</p> <p><code>Number.EPSILON</code> 一般用于设置“能够接受的误差范围”。比如，误差范围设为 <code>2</code> 的 <code>-50</code> 次方（即 <code>Number.EPSILON * Math.pow(2, 2)</code>），即如果两个浮点数的差小于这个值，我们就认为这两个浮点数相等。</p> <p>因此，<code>0.1 + 0.2</code> 的问题可以这样来解决：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">withinErrorMargin</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>left <span class="token operator">-</span> right<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">===</span> <span class="token number">0.3</span> <span class="token comment">// false</span>
<span class="token function">withinErrorMargin</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="_2021-年-10-月-14-日"><a href="#_2021-年-10-月-14-日" class="header-anchor">#</a> 2021 年 10 月 14 日</h2> <h3 id="math-对象的扩展-12-6-补"><a href="#math-对象的扩展-12-6-补" class="header-anchor">#</a> Math 对象的扩展（12.6 补）</h3> <ul><li><code>Math.trunc()</code>：去除小数部分，返回整数部分</li> <li><code>Math.sign()</code>：判断一个数是正数、负数还是零</li> <li><code>Math.cbrt()</code>：计算立方根</li></ul> <p><a href="https://es6.ruanyifeng.com/?search=%3F%3F&amp;x=3&amp;y=5#docs/number#Math-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95" target="_blank" rel="noopener noreferrer">查看更多 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2021-年-10-月-15-日"><a href="#_2021-年-10-月-15-日" class="header-anchor">#</a> 2021 年 10 月 15 日</h2> <h3 id="env-环境变量文件"><a href="#env-环境变量文件" class="header-anchor">#</a> .env 环境变量文件</h3> <p>主要有<code>.env</code>、<code>.env.[env]</code>、<code>.env.[env].local</code> 三种类型文件（<code>[env]</code> 指各种环境），优先级从左到右递增，其中 <code>.env.[env].local</code> 只在本地生效并且一般不提交到 <code>gitlab</code>，常用于多人合作开发时部署自己的联调环境</p> <p>环境变量文件中，只有 <code>NODE_ENV</code>, <code>BASE_URL</code> 和以 <code>VUE_APP_</code> 开头的变量能通过 <code>webpack.DefinePlugin</code> 静态地嵌入到代码中</p> <h2 id="_2021-年-10-月-16-日"><a href="#_2021-年-10-月-16-日" class="header-anchor">#</a> 2021 年 10 月 16 日</h2> <h3 id="箭头函数-12-10-补"><a href="#箭头函数-12-10-补" class="header-anchor">#</a> 箭头函数（12.10 补）</h3> <p>对于普通函数来说，内部的 <code>this</code> 指向函数运行时所在的对象，但是这一点对箭头函数不成立。它没有自己的 <code>this</code> 对象，内部的 <code>this</code> 就是定义时上层作用域中的 <code>this</code>。也就是说，箭头函数内部的 <code>this</code> 指向是固定的，相比之下，普通函数的 <code>this</code> 指向是可变的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;id:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token number">21</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// id: 42</span>
</code></pre></div><h2 id="_2021-年-10-月-17-日"><a href="#_2021-年-10-月-17-日" class="header-anchor">#</a> 2021 年 10 月 17 日</h2> <h3 id="es6-尾调用优化"><a href="#es6-尾调用优化" class="header-anchor">#</a> ES6 尾调用优化</h3> <p>函数调用会在内存形成一个“调用记录”，又称“调用帧”（<code>call frame</code>），保存调用位置和内部变量等信息。如果在函数 <code>A</code> 的内部调用函数 <code>B</code>，那么在 <code>A</code> 的调用帧上方，还会形成一个 <code>B</code> 的调用帧。等到 <code>B</code> 运行结束，将结果返回到 <code>A</code>，<code>B</code> 的调用帧才会消失。如果函数 <code>B</code> 内部还调用函数 <code>C</code>，那就还有一个 <code>C</code> 的调用帧，以此类推。所有的调用帧，就形成一个“调用栈”（<code>call stack</code>）。</p> <p>尾调用由于是函数的最后一步操作，所以不需要保留外层函数的调用帧，因为调用位置、内部变量等信息都不会再用到了，只要直接用内层函数的调用帧，取代外层函数的调用帧就可以了。这将大大节省内存。这就是“尾调用优化”的意义。</p> <p>但需要注意：<strong>尾调用优化仅在严格模式下开启</strong></p> <p>参考文档：<a href="https://es6.ruanyifeng.com/?search=%3F%3F&amp;x=3&amp;y=5#docs/function#%E5%B0%BE%E9%80%92%E5%BD%92%E4%BC%98%E5%8C%96%E7%9A%84%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">尾调用优化的实现 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2021-年-10-月-18-日"><a href="#_2021-年-10-月-18-日" class="header-anchor">#</a> 2021 年 10 月 18 日</h2> <p>------------------------------------------------------</p> <p>大致过完一遍 vue-cli4 官方文档...<br>
稍微熟悉了其中的配置...<br>
但手写 chainWebpack 还是有点困难...<br>
常用的插件也暂时没看...<br>
留着过 webpack 的时候再看吧...<br>
这个月好像断档的有点多...<br>
得努力了...<br>
hope...
祈っている...
🙏🙏🙏</p> <h2 id="_2021-年-10-月-19-日"><a href="#_2021-年-10-月-19-日" class="header-anchor">#</a> 2021 年 10 月 19 日</h2> <h3 id="从-0-开始搞-webpack"><a href="#从-0-开始搞-webpack" class="header-anchor">#</a> 从 0 开始搞 webpack</h3> <p>需要选定一个入口文件作为内部依赖关系图的“开始”，默认输入路径为 <code>/dist</code>；所有需要使用到的文件都需要在入口文件中引用</p> <p>各种常见类型文件对应处理 loader：</p> <table><thead><tr><th>文件类型</th> <th>对应 loader</th></tr></thead> <tbody><tr><td>js</td> <td>default</td></tr> <tr><td>css</td> <td>style-loader、css-loader</td></tr> <tr><td>scss</td> <td>node-sass、sass-loader</td></tr> <tr><td>less</td> <td>less-loader</td></tr> <tr><td>png | jpg | gif | svg</td> <td>file-loader | url-loader</td></tr> <tr><td>ttf | woff(2) | otf | eot</td> <td>file-loader</td></tr></tbody></table> <ul><li>处理 <code>css</code> 的 <code>loader</code> 顺序为：<code>css-loader</code> -&gt; <code>style-loader</code></li> <li>处理 <code>scss</code> 文件需要使用 <code>sass-loader</code>，前提是需要安装 <code>node-sass</code> 依赖</li> <li>若要将小 <code>icon</code> 转换成 <code>base64</code>，需要用到 <code>url-loader</code></li> <li><code>url-loader</code> 和 <code>file-loader</code> 只需要使用其中一个即可处理图片文件</li></ul> <h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="header-anchor">#</a> html-webpack-plugin</h3> <p>默认情况下 htmlwebpackplugin 会自动生成一个 HTML 文件，也可以自定义选定 template 文件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>plugins<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token class-name">htmlwebpackplugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;测试title&quot;</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dianame<span class="token punctuation">,</span> <span class="token string">&quot;realpath/template.html&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>指定 <code>template</code> 文件后，<code>htmlwebpackplugin</code> 会自动注入相关的 css、js 文件等</p> <p>如上，指定 <code>template</code> 且设置了 title 参数后，如果 <code>template</code> 文件中已经设置了标题，那么 title 将不生效，需要通过 <code>&lt;%= htmlWebpackPlugin.options.title %&gt;</code> 获取到配置中的 title 参数</p> <p>如果需要指定多入口文件：</p> <p>需要 <code>new</code> 多几个 <code>htmlwebpackplugin</code> 对象，同时修改 <code>entry</code> 和 <code>output</code> 参数</p> <ul><li>更多相关 api 请查阅：<a href="https://github.com/jantimon/html-webpack-plugin#options" target="_blank" rel="noopener noreferrer">html-webpack-plugin 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> clean-webpack-plugin</h3> <p>每次构建项目之前清理 /dist 文件夹</p> <p>使用时需要注意：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token comment">// const CleanWebpackPlugin  = require('clean-webpack-plugin') 错误</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>

plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>

</code></pre></div><p><strong>Otherwise</strong>：可以借助 <code>node.js</code> 的 <code>file</code> 模块进行文件夹删除</p> <p><strong>思考</strong>：new CleanWebpackPlugin() 放置的位置会不会影响到最终的效果？</p> <ul><li>更多相关配置可查阅：<a href="https://github.com/johnagan/clean-webpack-plugin#usage" target="_blank" rel="noopener noreferrer">clean-webpack-plugin 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2021-年-10-月-20-日"><a href="#_2021-年-10-月-20-日" class="header-anchor">#</a> 2021 年 10 月 20 日</h2> <h3 id="source-map"><a href="#source-map" class="header-anchor">#</a> source-map</h3> <p>将编译后的代码映射回源代码，用于开发环境</p> <p>相关 source-map 类型及对应打包速度如下：</p> <blockquote><p><code>+++</code> 非常快速, <code>++</code> 快速, <code>+</code> 比较快, <code>o</code> 中等, <code>-</code> 比较慢, <code>--</code> 慢</p></blockquote> <table><thead><tr><th>devtool</th> <th>构建速度</th> <th>重构速度</th> <th>生产环境</th> <th>品质（quality）</th></tr></thead> <tbody><tr><td>none</td> <td>+++</td> <td>+++</td> <td>yes</td> <td>打包后的代码</td></tr> <tr><td>eval</td> <td>+++</td> <td>+++</td> <td>no</td> <td>生成后的代码</td></tr> <tr><td>cheap-eval-source-map</td> <td>+</td> <td>++</td> <td>no</td> <td>转换过的代码（仅限行）</td></tr> <tr><td>cheap-module-eval-source-map</td> <td>o</td> <td>++</td> <td>no</td> <td>原始源代码（仅限行）</td></tr> <tr><td>eval-source-map</td> <td>--</td> <td>+</td> <td>no</td> <td>原始源代码</td></tr> <tr><td>cheap-source-map</td> <td>+</td> <td>o</td> <td>yes</td> <td>转换过的代码（仅限行）</td></tr> <tr><td>cheap-module-source-map</td> <td>o</td> <td>-</td> <td>yes</td> <td>原始源代码（仅限行）</td></tr> <tr><td>inline-cheap-source-map</td> <td>+</td> <td>o</td> <td>no</td> <td>转换过的代码（仅限行）</td></tr> <tr><td>inline-cheap-module-source-map</td> <td>o</td> <td>-</td> <td>no</td> <td>原始源代码（仅限行）</td></tr> <tr><td>source-map</td> <td>--</td> <td>--</td> <td>yes</td> <td>原始源代码</td></tr> <tr><td>inline-source-map</td> <td>--</td> <td>--</td> <td>no</td> <td>原始源代码</td></tr> <tr><td>hidden-source-map</td> <td>--</td> <td>--</td> <td>yes</td> <td>原始源代码</td></tr> <tr><td>nosources-source-map</td> <td>--</td> <td>--</td> <td>yes</td> <td>无源代码内容</td></tr></tbody></table> <ul><li>相关使用场景可参考：<a href="https://v4.webpack.docschina.org/configuration/devtool#%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" target="_blank" rel="noopener noreferrer">devtool 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>相关测试效果用例：<a href="https://github.com/webpack/webpack/tree/main/examples/source-map" target="_blank" rel="noopener noreferrer">source-map 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2021-年-10-月-21-日"><a href="#_2021-年-10-月-21-日" class="header-anchor">#</a> 2021 年 10 月 21 日</h2> <h3 id="webpack-自动化编译"><a href="#webpack-自动化编译" class="header-anchor">#</a> webpack 自动化编译</h3> <p>webpack 提供了以下三种自动化编译方案：</p> <ul><li>webpack watch mode</li> <li>webpack-dev-server</li> <li>webpack-dev-middleware</li></ul> <h4 id="webpack-watch-mode"><a href="#webpack-watch-mode" class="header-anchor">#</a> webpack watch mode</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实现原理大致可以理解为：<code>webpack</code> 监控着项目（依赖图）中的所有文件，当文件发生改变时，自动重新编译代码，无需手动运行编译。</p> <p>这种方法存在一个缺点，那就是每次重新编译，都需要手动刷新浏览器才会更新（<code>--watch</code> 会耗费较高的电脑性能吧？）</p> <h4 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack-dev-server</h4> <p>安装 <code>webpack-dev-server</code> 依赖后即可跑项目（<code>webpack</code> 官网指南下的配置 <code>contentBase</code> 不可用~）</p> <p><code>webpack-dev-server</code> 在编译之后不会写入到任何输出文件，而是将 <code>bundle</code> 文件保留在内存中，然后将它们 <code>serve</code> 到 <code>server</code> 中，相当于部署在 <code>server</code> 的根路径下</p> <p>相关原理内容较多，可参考以下链接：</p> <ul><li><a href="https://v4.webpack.docschina.org/configuration/dev-server/#devserver" target="_blank" rel="noopener noreferrer">devServer 配置 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cloud.tencent.com/developer/article/1742015" target="_blank" rel="noopener noreferrer">webpack-dev-server 运行原理 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="webpack-dev-middleware"><a href="#webpack-dev-middleware" class="header-anchor">#</a> webpack-dev-middleware</h4> <p><code>webpack-dev-middleware</code> 是一个封装器(<code>wrapper</code>)，它可以把 <code>webpack</code> 处理过的文件发送到一个 <code>server</code>。 <code>webpack-dev-server</code> 在内部使用了它，它也可以作为一个单独的 <code>package</code> 来使用，以便根据需求进行更多自定义设置。</p> <p>官方文档地址：</p> <ul><li><a href="https://v4.webpack.docschina.org/guides/development/#%E9%80%89%E6%8B%A9%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7" target="_blank" rel="noopener noreferrer">webpack 自动化编译 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2021-年-10-月-22-日"><a href="#_2021-年-10-月-22-日" class="header-anchor">#</a> 2021 年 10 月 22 日</h2> <h3 id="split-chunk-plugin"><a href="#split-chunk-plugin" class="header-anchor">#</a> split-chunk-plugin</h3> <p>比较通用的性能优化方案之一，可提升重复构建打包速度及页面访问速度。常用属性及其配置如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunk<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包的模块是按需引入、直接引入、还是全部都用于优化，对应的值为async initial all</span>
      minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token comment">// 抽离公共包的最小size</span>
      maxSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 最大size</span>
      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 某个模块至少被多少代码块引用，才会被提取成新的chunk</span>
      maxAsyncRequests<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 分割后，按需加载的代码块最多允许的并行请求数，在webpack5里默认值变为6</span>
      maxInitialRequests<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 分割后，入口代码块最多允许的并行请求数，在webpack5里默认值变为4</span>
      automaticNameDelimiter<span class="token operator">:</span> <span class="token string">&quot;~&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 用于生成的名称的分隔符</span>
      automaticNameMaxLength<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">// 生成的块的名称字符的最大值</span>
      name<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生成块的名称，为true时，将根据块和缓存组密钥自动生成名称</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将体积较大的包单独分离出来，减少vendor的体积，加快首屏速度</span>
        vendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;chunk-vendors&quot;</span><span class="token punctuation">,</span> <span class="token comment">// enforce默认为false下不能直接设置name值，否则打包会失败</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 表示缓存的优先级；</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 表示是否使用缓存</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>简单介绍其中的几个重要参数：</p> <ul><li><code>minSize</code>：当公共组件/包的大小超过 <code>minSize</code> 值时，才会抽离成单独的包</li> <li><code>minChunks</code>：当某个组件/包的引用次数超过 <code>minChunks</code> 时，会抽离成单独的包</li> <li><code>reuseExistingChunk</code>：当包未更改时是否直接使用之前的包</li></ul> <p><strong>Warning</strong>:</p> <ul><li><code>minChunks</code> 好像不生效？</li> <li><code>minSize</code> 和 <code>minChunks</code> 同时触发时才会拆包还是触发其中一个条件即拆包？</li></ul> <h2 id="_2021-年-10-月-23-日"><a href="#_2021-年-10-月-23-日" class="header-anchor">#</a> 2021 年 10 月 23 日</h2> <h3 id="数组新增的方法-12-15-补"><a href="#数组新增的方法-12-15-补" class="header-anchor">#</a> 数组新增的方法（12.15 补）</h3> <ul><li><code>includes</code>：表示某个数组是否包含给定的值，第二个参数为开始搜索的起始位置</li> <li><code>flat</code>：表示将嵌套的数组“拉平”，但默认只会“拉平”一层</li> <li><code>at</code>：接受一个整数作为参数，返回数组对应位置的成员</li></ul> <h3 id="对象新增的方法-12-15-补"><a href="#对象新增的方法-12-15-补" class="header-anchor">#</a> 对象新增的方法（12.15 补）</h3> <ul><li><code>Object.is</code> ：用于判断两个值是否相等，与 <code>===</code> 相似，但 <code>+0</code> 不等于 <code>-0</code> 以及 <code>NaN</code> 等于自身</li> <li><code>Object.assign</code>：用于对象的合并，将源对象的所有可枚举属性复制到目标对象</li> <li><code>Object.fromEntries</code>：用于将键值对数组转换为对象</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;baz&quot;</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div><h2 id="_2021-年-10-月-24-日"><a href="#_2021-年-10-月-24-日" class="header-anchor">#</a> 2021 年 10 月 24 日</h2> <h3 id="super-关键字-12-15-补"><a href="#super-关键字-12-15-补" class="header-anchor">#</a> super 关键字（12.15 补）</h3> <p><code>ES6</code> 新增了一个关键字 <code>super</code>，指向当前对象的原型对象。与之相类似的是 <code>this</code> 关键字，指向函数所在的当前对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> proto <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span>
  <span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> proto<span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hello&quot;</span>
</code></pre></div><p><strong>注意</strong>，<code>super</code> 关键字表示原型对象时，只能用在对象的方法之中，用在其他地方都会报错。</p> <h3 id="object-setprototypeof-12-15-补"><a href="#object-setprototypeof-12-15-补" class="header-anchor">#</a> Object.setPrototypeOf（12.15 补）</h3> <p><code>Object.setPrototypeOf</code> 方法可将一个指定对象的原型到另外一个对象或 <code>null</code>，是修改对象原型更合适的方法</p> <p>注意：由于现代 <code>JavaScript</code> 引擎优化属性访问所带来的特性的关系，更改对象的 <code>[[Prototype]]</code> 在各个浏览器和 <code>JavaScript</code> 引擎上都是一个很慢的操作。</p> <h2 id="_2021-年-10-月-25-日"><a href="#_2021-年-10-月-25-日" class="header-anchor">#</a> 2021 年 10 月 25 日</h2> <h3 id="浏览器渲染"><a href="#浏览器渲染" class="header-anchor">#</a> 浏览器渲染</h3> <p>收录一些关键字段</p> <ul><li>Chrome 浏览器，渲染引擎产生多个实例，对于每一个 tab 都是一个独立的过程（其他浏览器不同）</li> <li>页面的渲染是一个渐进的过程，为了更好的用户体验，渲染引擎将尽可能在浏览器中显示内容，因此会提前解析部分内容和显示，剩下的内容从网络返回回来再继续解析（通过浏览器 <code>network</code> 面板下打开 <code>Capture screenshots</code>可看出）</li> <li>词法分析是将输入信息切成小令牌(token)的过程。小令牌是语言词汇，即有效建筑模块的集合。</li> <li>非可视化元素将不会插入到渲染树中。如 <code>head</code> 元素、<code>display：none</code> 的元素；但如 <code>opacity：0</code> 的元素还会插入</li></ul> <h2 id="_2021-年-10-月-26-日"><a href="#_2021-年-10-月-26-日" class="header-anchor">#</a> 2021 年 10 月 26 日</h2> <h3 id="shim-预置依赖"><a href="#shim-预置依赖" class="header-anchor">#</a> shim 预置依赖</h3> <ul><li>当需要全局引入依赖的时候（虽然不推荐，但是真的香）如 lodash、jQuery</li> <li>当需要对某些依赖进行 polyfill 时</li></ul> <p>以上能力都是基于 ProvidePlugin 实现</p> <p>贴个文档地址吧：</p> <ul><li><a href="https://v4.webpack.docschina.org/guides/shimming/" target="_blank" rel="noopener noreferrer">shim 预置依赖 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v4.webpack.docschina.org/plugins/provide-plugin/" target="_blank" rel="noopener noreferrer">ProvidePlugin 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="webpack-构建性能"><a href="#webpack-构建性能" class="header-anchor">#</a> webpack 构建性能</h3> <p>webpack 官方提供的构建优化最佳实践：<a href="https://v4.webpack.docschina.org/guides/build-performance/" target="_blank" rel="noopener noreferrer">构建性能 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2021-年-10-月-27-日"><a href="#_2021-年-10-月-27-日" class="header-anchor">#</a> 2021 年 10 月 27 日</h2> <h3 id="symbol-12-16-补"><a href="#symbol-12-16-补" class="header-anchor">#</a> Symbol（12.16 补）</h3> <p><code>ES6</code> 引入的一种新的原始数据类型（<code>JavaScript</code> 第七种数据类型），表示独一无二的值。</p> <p><code>Symbol</code> 可以接收一个字符串作为参数，如果是对象，那么会调用其 <code>tostring</code> 方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">typeof</span> s <span class="token comment">// &quot;symbol&quot;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;abc&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
sym <span class="token comment">// Symbol(abc)</span>
</code></pre></div><p><code>Symbol</code> 作为属性名，遍历对象的时候，只能通过 <code>Object.getOwnPropertySymbols()</code> 方法，可以获取指定对象的所有 <code>Symbol</code> 属性名。该方法返回一个数组，成员是当前对象的所有用作属性名的 <code>Symbol</code> 值。</p> <p><code>Symbol</code> 的其他方法：</p> <ul><li><code>Symbol.for()</code>：替换或新建一个新的 <code>Symbol</code> 值</li> <li><code>Symbol.keyFor()</code>：查找并返回一个已登记的 <code>Symbol</code> 类型值的 <code>key</code></li></ul> <p>其他相关方法可查阅<a href="https://es6.ruanyifeng.com/?search=%3F%3F&amp;x=3&amp;y=5#docs/symbol#%E5%86%85%E7%BD%AE%E7%9A%84-Symbol-%E5%80%BC" target="_blank" rel="noopener noreferrer">文档 🚀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2021-年-10-月-28-日"><a href="#_2021-年-10-月-28-日" class="header-anchor">#</a> 2021 年 10 月 28 日</h2> <h3 id="reflect-ownkeys-12-16-补"><a href="#reflect-ownkeys-12-16-补" class="header-anchor">#</a> Reflect.ownKeys（12.16 补）</h3> <p>可以返回所有类型的键名，包括常规键名和 Symbol 键名</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;my_key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  nonEnum<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token comment">//  [&quot;enum&quot;, &quot;nonEnum&quot;, Symbol(my_key)]</span>
</code></pre></div><h2 id="_2021-年-10-月-29-日"><a href="#_2021-年-10-月-29-日" class="header-anchor">#</a> 2021 年 10 月 29 日</h2> <h3 id="set-12-21-补"><a href="#set-12-21-补" class="header-anchor">#</a> Set（12.21 补）</h3> <p><code>ES6</code> 提供的新数据结构 <code>Set</code>，类似于数组，但值都是唯一的。（在 <code>Set</code> 中认为 <code>NaN</code> 等于其本身，与 <code>===</code> 不一样）</p> <p>相关实例属性和方法</p> <ul><li><code>size</code>：返回总数</li> <li><code>add</code>：添加某个值</li> <li><code>delete</code>：删除某个值</li> <li><code>has</code>：判断是否存在</li> <li><code>clear</code>：清除所有值</li> <li><code>forEach</code>、<code>keys</code>、<code>values</code>、<code>entries</code>：遍历方法</li></ul> <h3 id="weakset-12-21-补"><a href="#weakset-12-21-补" class="header-anchor">#</a> WeakSet（12.21 补）</h3> <p><code>WeakSet</code> 与 <code>Set</code> 相似，但有以下两个区别：</p> <ul><li><code>WeakSet</code> 的成员只能是对象（任何具有 <code>Iterable</code> 接口的对象，都可以作为 <code>WeakSet</code> 的参数）</li> <li><code>WeakSet</code> 中的对象都是弱引用，即垃圾回收机制不考虑 <code>WeakSet</code> 对该对象的引用</li> <li><code>WeakSet</code> 不能遍历</li></ul> <p>相关方法：</p> <ul><li><code>has</code>：返回是否存在</li> <li><code>add</code>：添加某个成员</li> <li><code>delete</code>：删除某个成员</li></ul> <p><code>WeakSet</code> 的一个用处，是储存 <code>DOM</code> 节点，而不用担心这些节点从文档移除时，会引发内存泄漏</p> <h2 id="_2021-年-10-月-30-日"><a href="#_2021-年-10-月-30-日" class="header-anchor">#</a> 2021 年 10 月 30 日</h2> <h3 id="map-12-22-补"><a href="#map-12-22-补" class="header-anchor">#</a> Map（12.22 补）</h3> <p><code>ES6</code> 提供的新数据结构 <code>Map</code>，类似于对象，是键值对的集合，但“键”的范围不限于字符串。相关增删查的方法同 <code>Set</code>（注意一点：<code>Map</code> 的遍历顺序就是插入的顺序）</p> <p><code>Map</code> 转对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">strMapToObj</span><span class="token punctuation">(</span><span class="token parameter">strMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>k<span class="token punctuation">,</span> v<span class="token punctuation">]</span> <span class="token keyword">of</span> strMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>
</code></pre></div><h3 id="weakmap-12-22-补"><a href="#weakmap-12-22-补" class="header-anchor">#</a> WeakMap（12.22 补）</h3> <p><code>WeakMap</code> 结构与 <code>Map</code> 结构类似，也是用于生成键值对的集合，但是有以下两点不同：</p> <ul><li><code>WeakMap</code> 只接受对象为键名</li> <li><code>WeakMap</code> 的<strong>键名</strong>所指向的对象，不计入垃圾回收机制</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> e1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> e2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span>e1<span class="token punctuation">,</span> <span class="token string">&quot;foo 元素&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>e2<span class="token punctuation">,</span> <span class="token string">&quot;bar 元素&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre></div><p>上面代码中，<code>e1</code> 和 <code>e2</code> 是两个对象，我们通过 <code>arr</code> 数组对这两个对象添加一些文字说明。这就形成了 <code>arr</code> 对 <code>e1</code> 和 <code>e2</code> 的引用。一旦不再需要这两个对象，我们就必须手动删除这个引用，否则垃圾回收机制就不会释放 <code>e1</code> 和 <code>e2</code> 占用的内存。</p> <h2 id="_2021-年-10-月-31-日"><a href="#_2021-年-10-月-31-日" class="header-anchor">#</a> 2021 年 10 月 31 日</h2> <h3 id="理解构造函数"><a href="#理解构造函数" class="header-anchor">#</a> 理解构造函数</h3> <p>可以理解为一个工厂，用于批量生产/初始化具有某些“特定功能”的对象，即拥有特定的属性和方法</p> <ul><li>构造函数的首字母一定要大写</li> <li>需要配合 <code>new</code> 使用才有意义</li></ul> <p><code>new</code> 的用处：</p> <ul><li>在内存中创建一个新的对象</li> <li>让 <code>this</code> 指向这个对象</li> <li>执行构造函数的代码（通常是赋予属性、方法）</li> <li>返回这个新对象</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Real102/Blog/edit/master/docs/ugly/2021.10.md" target="_blank" rel="noopener noreferrer">Edit in GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/28/2021, 4:41:47 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/ugly/2021.9.html" class="prev">
        2021.9
      </a></span> <span class="next"><a href="/Blog/ugly/2021.11.html">
        2021.11
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Blog/assets/js/app.26c94a5c.js" defer></script><script src="/Blog/assets/js/2.b2fff99d.js" defer></script><script src="/Blog/assets/js/9.db5433a8.js" defer></script>
  </body>
</html>
