(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{466:function(t,s,a){"use strict";a.r(s);var e=a(45),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#笔记"}},[t._v("#")]),t._v(" 笔记")]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-1-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-1-日"}},[t._v("#")]),t._v(" 2022 年 3 月 1 日")]),t._v(" "),a("h3",{attrs:{id:"es6-module-动态加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-module-动态加载"}},[t._v("#")]),t._v(" ES6 Module 动态加载")]),t._v(" "),a("p",[a("code",[t._v("ES6")]),t._v(" 模块是编译时加载，"),a("code",[t._v("CommonJS")]),t._v(" 和 "),a("code",[t._v("AMD")]),t._v(" 则是运行时加载。")]),t._v(" "),a("p",[a("code",[t._v("ES2020")]),t._v(" 提案引入了 "),a("code",[t._v("import()")]),t._v(" 函数，支持动态加载模块，并且 "),a("code",[t._v("import()")]),t._v(" 返回的是一个 "),a("code",[t._v("Promise")]),t._v(" 对象")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" main "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("./section-modules/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("someVariable"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(".js")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadPageInto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("import()")]),t._v(" 函数可以用在任何地方，不仅仅是模块，非模块的脚本也可以使用。它是运行时执行")]),t._v(" "),a("li",[a("code",[t._v("import()")]),t._v(" 函数与所加载的模块没有静态连接关系，这点也是与 "),a("code",[t._v("import")]),t._v(" 语句不相同")]),t._v(" "),a("li",[a("code",[t._v("import()")]),t._v(" 类似于 "),a("code",[t._v("Node")]),t._v(" 的 "),a("code",[t._v("require")]),t._v(" 方法，区别主要是前者是异步加载，后者是同步加载")])]),t._v(" "),a("p",[a("code",[t._v("import()")]),t._v(" 加载模块成功以后，这个模块会作为一个对象，当作 "),a("code",[t._v("then")]),t._v(" 方法的参数。因此，可以使用对象解构赋值的语法，获取输出接口。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./myModule.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" export1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" export2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果模块有 default 输出接口，可以用参数直接获得")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./myModule.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("myModule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 async 函数之中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myModule "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./myModule.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" export1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" export2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./myModule.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./module1.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./module2.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./module3.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2022-年-3-月-2-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-2-日"}},[t._v("#")]),t._v(" 2022 年 3 月 2 日")]),t._v(" "),a("h3",{attrs:{id:"es6-模块与-commonjs-模块的差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-模块与-commonjs-模块的差异"}},[t._v("#")]),t._v(" ES6 模块与 CommonJS 模块的差异")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("CommonJS")]),t._v(" 模块输出的是一个值的拷贝，"),a("code",[t._v("ES6")]),t._v(" 模块输出的是值的引用")]),t._v(" "),a("li",[a("code",[t._v("CommonJS")]),t._v(" 模块是运行时加载，"),a("code",[t._v("ES6")]),t._v(" 模块是编译时输出接口")]),t._v(" "),a("li",[a("code",[t._v("CommonJS")]),t._v(" 模块的 "),a("code",[t._v("require()")]),t._v(" 是同步加载模块，"),a("code",[t._v("ES6")]),t._v(" 模块的 "),a("code",[t._v("import")]),t._v(" 命令是异步加载，有一个独立的模块依赖的解析阶段")])]),t._v(" "),a("p",[a("code",[t._v("JavaScript")]),t._v(" 现在有两种模块。一种是 "),a("code",[t._v("ES6")]),t._v(" 模块，简称 "),a("code",[t._v("ESM")]),t._v("；另一种是 "),a("code",[t._v("CommonJS")]),t._v(" 模块，简称 "),a("code",[t._v("CJS")])]),t._v(" "),a("p",[a("code",[t._v("CommonJS")]),t._v(" 模块是 "),a("code",[t._v("Node.js")]),t._v(" 专用的，与 "),a("code",[t._v("ES6")]),t._v(" 模块不兼容。语法上面，两者最明显的差异是："),a("code",[t._v("CommonJS")]),t._v(" 模块使用 "),a("code",[t._v("require()")]),t._v(" 和 "),a("code",[t._v("module.exports")]),t._v("，"),a("code",[t._v("ES6")]),t._v(" 模块使用 "),a("code",[t._v("import")]),t._v(" 和 "),a("code",[t._v("export")])]),t._v(" "),a("p",[t._v("从 "),a("code",[t._v("Node.js v13.2")]),t._v(" 版本开始，"),a("code",[t._v("Node.js")]),t._v(" 已经默认打开了 "),a("code",[t._v("ES6")]),t._v(" 模块支持。"),a("code",[t._v("Node.js")]),t._v(" 要求 "),a("code",[t._v("ES6")]),t._v(" 模块采用 "),a("code",[t._v(".mjs")]),t._v(" 后缀文件名。也就是说，只要脚本文件里面使用 "),a("code",[t._v("import")]),t._v(" 或者 "),a("code",[t._v("export")]),t._v(" 命令，那么就必须采用 "),a("code",[t._v(".mjs")]),t._v(" 后缀名。"),a("code",[t._v("Node.js")]),t._v(" 遇到 "),a("code",[t._v(".mjs")]),t._v(" 文件，就认为它是 "),a("code",[t._v("ES6")]),t._v(" 模块。如果不希望将后缀名改成 "),a("code",[t._v(".mjs")]),t._v("，可以在项目的 "),a("code",[t._v("package.json")]),t._v(" 文件中，指定 "),a("code",[t._v("type")]),t._v(" 字段为 "),a("code",[t._v("module")]),t._v("。一旦设置了以后，该项目的 "),a("code",[t._v("JS")]),t._v(" 脚本，就被解释成 "),a("code",[t._v("ES6")]),t._v(" 模块。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"module"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如果这时还要使用 "),a("code",[t._v("CommonJS")]),t._v(" 模块，那么需要将 "),a("code",[t._v("CommonJS")]),t._v(" 脚本的后缀名都改成 "),a("code",[t._v(".cjs")]),t._v("。如果没有 "),a("code",[t._v("type")]),t._v(" 字段，或者 "),a("code",[t._v("type")]),t._v(" 字段为 "),a("code",[t._v("commonjs")]),t._v("，则 · 脚本会被解释成 "),a("code",[t._v("CommonJS")]),t._v(" 模块。")]),t._v(" "),a("p",[t._v("总结为一句话："),a("code",[t._v(".mjs")]),t._v(" 文件总是以 "),a("code",[t._v("ES6")]),t._v(" 模块加载，"),a("code",[t._v(".cjs")]),t._v(" 文件总是以 "),a("code",[t._v("CommonJS")]),t._v(" 模块加载，"),a("code",[t._v(".js")]),t._v(" 文件的加载取决于 · 里面 "),a("code",[t._v("type")]),t._v(" 字段的设置。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("CommonJS")]),t._v(" 模块加载 "),a("code",[t._v("ES6")]),t._v(" 模块")])]),t._v(" "),a("p",[a("code",[t._v("CommonJS")]),t._v(" 的 "),a("code",[t._v("require()")]),t._v(" 命令不能加载 "),a("code",[t._v("ES6")]),t._v(" 模块，会报错，只能使用 "),a("code",[t._v("import()")]),t._v(" 这个方法加载。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./my-app.mjs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("ES6")]),t._v(" 模块加载 "),a("code",[t._v("CommonJS")]),t._v(" 模块")])]),t._v(" "),a("p",[a("code",[t._v("ES6")]),t._v(" 模块的 "),a("code",[t._v("import")]),t._v(" 命令可以加载 "),a("code",[t._v("CommonJS")]),t._v(" 模块，但是只能整体加载，不能只加载单一的输出项。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正确")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" packageMain "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commonjs-package"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 报错")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" method "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commonjs-package"')]),t._v("\n")])])]),a("h2",{attrs:{id:"_2022-年-3-月-3-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-3-日"}},[t._v("#")]),t._v(" 2022 年 3 月 3 日")]),t._v(" "),a("h3",{attrs:{id:"类型断言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型断言"}},[t._v("#")]),t._v(" 类型断言")]),t._v(" "),a("p",[a("code",[t._v("TypeScript")]),t._v(" 允许你覆盖它的推断，并且能以你任何你想要的方式分析它，这种机制被称为"),a("code",[t._v("「类型断言」")]),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("TypeScript")]),t._v(" 类型断言用来告诉编译器你比它更了解这个类型，并且它不应该再发出错误。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初版类型断言语法如下，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 现在 bar 的类型是 'string'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因上述语法与JSX语法存在歧义")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因此建议使用以下语法来为类型断言")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" bar "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("双重断言？")]),t._v(" "),a("p",[t._v("参考文档："),a("a",{attrs:{href:"https://jkchao.github.io/typescript-book-chinese/typings/typeAssertion.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("类型断言"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-4-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-4-日"}},[t._v("#")]),t._v(" 2022 年 3 月 4 日")]),t._v(" "),a("h3",{attrs:{id:"类型别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型别名"}},[t._v("#")]),t._v(" 类型别名")]),t._v(" "),a("p",[a("code",[t._v("TypeScript")]),t._v(" 提供了为类型注解设置别名的便捷语法，你可以使用 "),a("code",[t._v("type SomeName = someValidTypeAnnotation")]),t._v(" 来创建别名")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// StrOrNum 就是类型别名，后面的这一串 string | number 是类型注解")]),t._v("\ntype StrOrNum "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" number\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sample"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StrOrNum\nsample "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v("\nsample "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会检查类型")]),t._v("\nsample "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2022-年-3-月-5-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-5-日"}},[t._v("#")]),t._v(" 2022 年 3 月 5 日")]),t._v(" "),a("h3",{attrs:{id:"ts-命名空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ts-命名空间"}},[t._v("#")]),t._v(" TS 命名空间")]),t._v(" "),a("p",[t._v("命名空间可以作为组织代码的一种手段，帮助我们记录类型并且不用担心与其他对象产生命名冲突")]),t._v(" "),a("p",[t._v("可以将命名空间 "),a("code",[t._v("export")]),t._v(" 出去，然后再通过命名空间访问暴露出来的变量。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("namespace Utility "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里注意，命名空间里面的变量也需要export，否则在外面访问不了")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// usage")]),t._v("\nUtility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Call me'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nUtility"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'maybe'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2022-年-3-月-6-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-6-日"}},[t._v("#")]),t._v(" 2022 年 3 月 6 日")]),t._v(" "),a("h3",{attrs:{id:"types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#types"}},[t._v("#")]),t._v(" @types")]),t._v(" "),a("p",[t._v("可以通过 "),a("code",[t._v("npm")]),t._v(" 来安装使用 "),a("code",[t._v("@types")]),t._v("，如下为 "),a("code",[t._v("jQuery")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @types/jquery --save-dev\n")])])]),a("p",[t._v("默认情况下，"),a("code",[t._v("TypeScript")]),t._v(" 会自动包含支持全局使用的任何声明定义。例如 "),a("code",[t._v("jquery")]),t._v("，应该能够在项目中开始全局使用 "),a("code",[t._v("$")])]),t._v(" "),a("p",[t._v("此外，还可以通过 "),a("code",[t._v("tsconfig.js")]),t._v(" 的 "),a("code",[t._v("compilerOptions.types")]),t._v(" 选项，引入指定的类型。如下所示，通过配置 "),a("code",[t._v('compilerOptions.types: [ "jquery" ]')]),t._v(" 后，只允许使用 "),a("code",[t._v("jquery")]),t._v(" 的 "),a("code",[t._v("@types")]),t._v(" 包，即使安装了另一个声明文件，比如 "),a("code",[t._v("npm install @types/node")]),t._v("，它的全局变量（例如 "),a("code",[t._v("process")]),t._v("）也不会泄漏到你的代码中，直到你将它们添加到 "),a("code",[t._v("tsconfig.json")]),t._v(" 类型选项。")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"compilerOptions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jquery"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("TS")]),t._v(" 类型声明包搜索地址："),a("a",{attrs:{href:"https://www.typescriptlang.org/dt/search?search=",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.typescriptlang.org/dt/search?search="),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-7-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-7-日"}},[t._v("#")]),t._v(" 2022 年 3 月 7 日")]),t._v(" "),a("h3",{attrs:{id:"types、types、typeroots"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#types、types、typeroots"}},[t._v("#")]),t._v(" @types、types、typeRoots")]),t._v(" "),a("p",[a("code",[t._v("tsconfig.js")]),t._v(" 中的："),a("code",[t._v("types")]),t._v("、"),a("code",[t._v("typeRoots")]),t._v(" 都是用于指定加载包的配置项")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("types")]),t._v(" 是引入指定的包，并且只有列出来的才会被引入")]),t._v(" "),a("li",[a("code",[t._v("typeRoots")]),t._v(" 是指定一个路径，并且该路径下的所有包都会被引入")]),t._v(" "),a("li",[a("code",[t._v("@types")]),t._v(" 默认所有可见的 "),a("code",[t._v("@types")]),t._v(" 包会在编译过程中被包含进来")])]),t._v(" "),a("p",[t._v("（可以考虑将项目的 "),a("code",[t._v(".d.ts")]),t._v(" 等类型声明文件统一放置在 "),a("code",[t._v("src/@types/")]),t._v("下，然后在 "),a("code",[t._v("typeRoots")]),t._v(" 中指定）")]),t._v(" "),a("p",[t._v("参考地址："),a("a",{attrs:{href:"https://www.tslang.cn/docs/handbook/tsconfig-json.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.tslang.cn/docs/handbook/tsconfig-json.html"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-8-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-8-日"}},[t._v("#")]),t._v(" 2022 年 3 月 8 日")]),t._v(" "),a("h3",{attrs:{id:"shims-vue-d-ts-文件作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shims-vue-d-ts-文件作用"}},[t._v("#")]),t._v(" shims-vue.d.ts 文件作用")]),t._v(" "),a("p",[a("code",[t._v(".vue")]),t._v(" 类型文件本身不被 "),a("code",[t._v("ts")]),t._v(" 识别，"),a("code",[t._v("ts")]),t._v(" 只能识别 "),a("code",[t._v(".ts")]),t._v("、"),a("code",[t._v(".d.ts")]),t._v("、"),a("code",[t._v(".tsx")]),t._v(" 后缀文件")]),t._v(" "),a("p",[t._v("加上模块声明是为了能够被 "),a("code",[t._v("webpack")]),t._v(" 处理，并且能够识别 "),a("code",[t._v("export")]),t._v(" 出来的对象")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("declare module "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.vue'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Ambient module declarations 环境模块说明")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Vue\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("参考地址："),a("a",{attrs:{href:"https://fettblog.eu/typescript-modules-for-webpack/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://fettblog.eu/typescript-modules-for-webpack/"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-9-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-9-日"}},[t._v("#")]),t._v(" 2022 年 3 月 9 日")]),t._v(" "),a("h3",{attrs:{id:"d-ts-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#d-ts-文件"}},[t._v("#")]),t._v(" .d.ts 文件")]),t._v(" "),a("ul",[a("li",[t._v("会全局自动生效，需要注意命名冲突问题，结合 "),a("code",[t._v("namespace")]),t._v(" 使用")]),t._v(" "),a("li",[t._v("如果依赖某个全局库，可以使用 "),a("code",[t._v('/// <reference types="..." />')]),t._v(" 命令 （em...没有实际使用过）")])]),t._v(" "),a("p",[t._v("参考文档："),a("a",{attrs:{href:"https://www.tslang.cn/docs/handbook/declaration-files/library-structures.html#preventing-name-conflicts",target:"_blank",rel:"noopener noreferrer"}},[t._v("preventing-name-conflicts"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-10-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-10-日"}},[t._v("#")]),t._v(" 2022 年 3 月 10 日")]),t._v(" "),a("h3",{attrs:{id:"常用方法类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用方法类型"}},[t._v("#")]),t._v(" 常用方法类型")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("setTimeout")]),t._v("、"),a("code",[t._v("setInterval")]),t._v(" 的类型为 "),a("code",[t._v("number")]),t._v(" （如果仍然异常，可以考虑使用 "),a("code",[t._v("window.setTimeout")]),t._v("）")]),t._v(" "),a("li",[a("code",[t._v("element-ui")]),t._v(" 中的各种类型组件都有其对应的类型，如："),a("code",[t._v("el-form")]),t._v(" 对应 "),a("code",[t._v("Form")]),t._v("；"),a("code",[t._v("el-table")]),t._v(" 对应 "),a("code",[t._v("Table")])])]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-11-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-11-日"}},[t._v("#")]),t._v(" 2022 年 3 月 11 日")]),t._v(" "),a("h3",{attrs:{id:"类型守卫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型守卫"}},[t._v("#")]),t._v(" 类型守卫")]),t._v(" "),a("p",[t._v("类型守卫主要指一些在特定作用域内 "),a("code",[t._v("收缩")]),t._v(" 变量类型的类型判断行为（也就是类型保护？）")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("typeof")]),t._v(" 类型判断")]),t._v(" "),a("li",[a("code",[t._v("instanceof")]),t._v(" 原型判断")]),t._v(" "),a("li",[a("code",[t._v("in")]),t._v(" 属性判断")]),t._v(" "),a("li",[a("code",[t._v("==")]),t._v("、"),a("code",[t._v("===")]),t._v(" 等判断运算符")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" arg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里 arg 的类型 收紧 为 string")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里 arg 的类型 收紧 为 number")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2022-年-3-月-12-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-12-日"}},[t._v("#")]),t._v(" 2022 年 3 月 12 日")]),t._v(" "),a("h3",{attrs:{id:"ts-运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ts-运算符"}},[t._v("#")]),t._v(" TS 运算符")]),t._v(" "),a("ul",[a("li",[t._v("非空断言运算符"),a("code",[t._v("!:")]),t._v("：表达式之后写 "),a("code",[t._v("!:")]),t._v(" 实际上是一个类型断言，该值不是 "),a("code",[t._v("null")]),t._v(" 和 "),a("code",[t._v("undefined")])])]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-13-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-13-日"}},[t._v("#")]),t._v(" 2022 年 3 月 13 日")]),t._v(" "),a("h3",{attrs:{id:"pnpm-一探"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-一探"}},[t._v("#")]),t._v(" pnpm 一探")]),t._v(" "),a("p",[a("code",[t._v("pnpm")]),t._v(" 类似于 "),a("code",[t._v("npm")]),t._v("，可以将多个项目相同的依赖存储在一个统一的位置，当安装软件包时， 其包含的所有文件都会硬链接自此位置，而不会占用 额外的硬盘空间，可以极大程度的减轻存储压力以及增加安装速度")]),t._v(" "),a("p",[t._v("文档地址："),a("a",{attrs:{href:"https://www.pnpm.cn/motivation",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.pnpm.cn/motivation"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("实际体验发现：")]),t._v(" "),a("ul",[a("li",[t._v("安装单个依赖时，应该是扫了一遍 "),a("code",[t._v("node_modules")]),t._v("，然后再下载依赖，话费的时间比直接 "),a("code",[t._v("npm install")]),t._v(" 要长")]),t._v(" "),a("li",[t._v("旧项目改用 "),a("code",[t._v("pnpm")]),t._v(" 时，发现 "),a("code",[t._v("webpack")]),t._v("、"),a("code",[t._v("url-loader")]),t._v(" 等依赖都会出现问题，如 "),a("code",[t._v("10KB")]),t._v(" 以下的图片压缩异常")]),t._v(" "),a("li",[t._v("尝试两个项目用 "),a("code",[t._v("pnpm")]),t._v(" 安装，但发现整理的包体积并没有缩小")])]),t._v(" "),a("h2",{attrs:{id:"_2022-年-3-月-14-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-14-日"}},[t._v("#")]),t._v(" 2022 年 3 月 14 日")]),t._v(" "),a("h3",{attrs:{id:"nodejs-is-not-undef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-is-not-undef"}},[t._v("#")]),t._v(" NodeJS is not undef")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("tsconfig.json")]),t._v(" 中的 "),a("code",[t._v("types")]),t._v(" 选项中，添加了 "),a("code",[t._v("node")]),t._v(" 后，使用 "),a("code",[t._v("NodeJS")]),t._v(" 命名空间提示 "),a("code",[t._v("NodeJS is not undef")]),t._v("，可以在 "),a("code",[t._v("eslintrc.js")]),t._v(" 中增加")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"globals"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"NodeJS"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2022-年-3-月-15-日"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2022-年-3-月-15-日"}},[t._v("#")]),t._v(" 2022 年 3 月 15 日")]),t._v(" "),a("h3",{attrs:{id:"xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss"}},[t._v("#")]),t._v(" XSS")]),t._v(" "),a("p",[t._v("XSS 攻击有两大要素： 1. 攻击者提交恶意代码。 2. 浏览器执行恶意代码。")]),t._v(" "),a("p",[t._v("在使用 .innerHTML、.outerHTML、document.write() 时要特别小心，不要把不可信的数据作为 HTML 插到页面上，而应尽量使用 .textContent、.setAttribute() 等。")]),t._v(" "),a("ul",[a("li",[t._v("script 标签")]),t._v(" "),a("li",[t._v("img 标签")]),t._v(" "),a("li",[t._v("字符转义")]),t._v(" "),a("li",[t._v("meta 标签中的 url："),a("code",[t._v("<META HTTP-EQUIV=”refresh” CONTENT=”0; URL=http://;URL=javascript:alert(‘XSS’);”>")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);