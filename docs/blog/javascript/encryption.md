# å¸¸ç”¨çš„åŠ å¯†æ–¹æ¡ˆåŠç›¸å…³å®ç°ä»£ç 

## å¯¹ç§°åŠ å¯†

å¯¹ç§°åŠ å¯†æ˜¯æœ€å¿«é€Ÿã€æœ€ç®€å•çš„ä¸€ç§åŠ å¯†æ–¹å¼ï¼ŒåŠ å¯†ä¸è§£å¯†ç”¨çš„æ˜¯åŒæ ·çš„å¯†é’¥ã€‚å¯¹ç§°åŠ å¯†ä¸€èˆ¬ä½¿ç”¨ç›¸å¯¹è¾ƒå°çš„å¯†é’¥ï¼Œå› ä¸ºå¯†é’¥è¶Šå¤§ï¼ŒåŠ å¯†è¶Šå¼ºï¼Œç›¸åº”çš„åŠ è§£å¯†çš„æ—¶é—´å°±æ›´é•¿ã€‚å…¸å‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ï¼š`AES`ã€`DES` ç­‰

ä¼˜ç‚¹ï¼š

-   åŠ å¯†é€Ÿåº¦å¿«ï¼Œåœ¨å‘é€å¤§é‡æ•°æ®çš„æ—¶å€™ä½¿ç”¨ï¼Œè®¡ç®—é€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜

ç¼ºç‚¹ï¼š

-   å…±ç”¨ä¸€ä¸ªåŠ è§£å¯†çš„ç§˜é’¥
-   ç§˜é’¥çš„ä¼ è¾“å®‰å…¨æ€§è¾ƒä½

### AES åŠ å¯†ç®—æ³•

å‰ç«¯ä¸€èˆ¬ä¼šåŸºäº [crypto.js ğŸš€](https://www.npmjs.com/package/crypto-js) æ¥å®ç° `AES` åŠ å¯†

`AES`åŠ è§£å¯†ä»£ç 

```javascript
  // åŠ å¯†
  encrypt(word, keyStr) {
    const key = CryptoJS.enc.Utf8.parse(keyStr)
    const srcs = CryptoJS.enc.Utf8.parse(word)
    const encrypted = CryptoJS.AES.encrypt(srcs, key, {
      mode: CryptoJS.mode.ECB,
      padding: CryptoJS.pad.Pkcs7,
    })
    return encrypted.toString()
  },
  //è§£å¯†
  decrypt(word, keyStr) {
    const key = CryptoJS.enc.Utf8.parse(keyStr)
    const decrypt = CryptoJS.AES.decrypt(word, key, {
      mode: CryptoJS.mode.ECB,
      padding: CryptoJS.pad.Pkcs7,
    })
    return CryptoJS.enc.Utf8.stringify(decrypt).toString()
  },
```

#### å‚æ•°è§£æ

##### æ¨¡å¼ mode

-   `ECB` æ¨¡å¼ï¼šæœ€ç®€å•çš„ä¸€ç§åŠ å¯†æ¨¡å¼ï¼Œæ¯ä¸ªå—è¿›è¡Œç‹¬ç«‹åŠ å¯†ï¼Œå—ä¸å—ä¹‹é—´åŠ å¯†äº’ä¸å½±å“ï¼Œè¿™æ ·å°±èƒ½å¹¶è¡Œï¼Œæ•ˆç‡é«˜ã€‚è™½ç„¶è¿™æ ·åŠ å¯†å¾ˆç®€å•ï¼Œä½†æ˜¯ä¸å®‰å…¨ï¼Œå¦‚æœä¸¤ä¸ªå—çš„`æ˜æ–‡ä¸€æ¨¡ä¸€æ ·`ï¼Œé‚£ä¹ˆåŠ å¯†å‡ºæ¥çš„`å¯†æ–‡ä¹Ÿä¸€æ¨¡ä¸€æ ·`ã€‚
-   `CBC` æ¨¡å¼ï¼šå¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œåˆå§‹å‘é‡ `iv` ï¼ˆåç§»é‡ï¼‰
-   `CTR`ï¼Œ`OCF`ï¼Œ`CFB`...

##### å¡«å…… padding

-   `NoPadding`ï¼šä¸å¡«å……ï¼Œä½†è¦æ±‚åŸå§‹åŠ å¯†å­—ç¬¦ä¸²å¿…é¡»æ˜¯ 128 çš„æ•´æ•°å€
-   `PKCS5`ï¼šå‡è®¾å—å¤§å°ä¸º 8 ä¸ªå­—èŠ‚ï¼Œå¦‚æœè¿™ä¸ªå—åªæœ‰ 5 ä¸ªå­—èŠ‚ï¼Œå·® 8 å­—èŠ‚è¿˜æœ‰ 3 ä¸ªï¼Œé‚£ä¹ˆåç»­å°±è¡¥ä¸Š 3 ä¸ª 3ï¼›å¦‚æœæ°å·§æ˜¯ 8 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆä¼šåœ¨åŸä¸²åè¡¥ä¸Š 8 ä¸ª 8ï¼ˆæ–¹ä¾¿è§£å¯†ï¼‰ï¼Œå› æ­¤åªéœ€è¦çœ‹æœ€åä¸€ä½å°±èƒ½ç®—å‡ºåŸå—çš„å¤§å°æ˜¯å¤šå°‘
-   `PKCS7`ï¼šå¡«å……æ–¹å¼è·Ÿ `Pkcs5` ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯ï¼Œ`Pkcs5` åªæ˜¯å¯¹ 8 å­—èŠ‚å—è¿›è¡Œå¡«å……ï¼Œè€Œ `Pkcs7` å¯ä»¥å¯¹ 1~256 å­—èŠ‚å¤§å°çš„å—è¿›è¡Œå¡«å……

##### åç§»é‡ iv

iv çš„ä½œç”¨å°±æ˜¯ä¸ºäº†é˜²æ­¢åŒæ ·çš„æ˜æ–‡å—è¢«åŠ å¯†æˆåŒæ ·çš„å†…å®¹ã€‚åŸç†æ˜¯ç¬¬ä¸€ä¸ªæ˜æ–‡å—è·Ÿåˆå§‹å‘é‡åšå¼‚æˆ–ååŠ å¯†ï¼Œç¬¬äºŒä¸ªå—è·Ÿç¬¬ä¸€ä¸ªå¯†æ–‡å—åšå¼‚æˆ–å†åŠ å¯†ï¼Œä¾æ¬¡ç±»æ¨ï¼Œé¿å…äº†åŒæ ·çš„å—è¢«åŠ å¯†æˆåŒæ ·çš„å†…å®¹ã€‚

## éå¯¹ç§°åŠ å¯†

éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªå…¬é’¥ä¸€ä¸ªç§é’¥ï¼Œä½¿ç”¨å…¶ä¸­ä¸€æŠŠå¯†é’¥ï¼ˆå…¬é’¥ï¼‰åŠ å¯†åçš„æ˜æ–‡ï¼Œåªæœ‰å¯¹åº”çš„å¯†é’¥ï¼ˆç§é’¥ï¼‰æ‰èƒ½è§£çš„å¼€ã€‚å…¸å‹çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ï¼š`RSA`

ä¼˜ç‚¹ï¼š

-   æœ‰ä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥
-   ç›¸åŒæ•°æ®ç»è¿‡å…¬é’¥åŠ å¯†çš„ç»“æœä¸ä¸€è‡´
-   ç ´è§£éš¾åº¦é«˜ï¼ˆä½†ç›®å‰ 512 ä½å·²è¢«ç ´è§£ï¼Œéœ€è¦ä½¿ç”¨ 1024+ï¼‰

ç¼ºç‚¹ï¼š

-   åŠ å¯†é€Ÿåº¦æ…¢ï¼Œæ•ˆç‡ä½ï¼Œåªé€‚åˆæ•°æ®é‡è¾ƒå°çš„æƒ…å†µ

### RSA åŠ å¯†ç®—æ³•

`RSA` å¯ä»¥ç”¨æ¥åšåŠ å¯†æˆ–è€…åšç­¾åï¼Œä¸¤è€…æ€§è´¨ä¸ä¸€æ ·ï¼šç­¾åçš„ä½œç”¨æ˜¯è®©æ¥å—æ–¹éªŒè¯ä½ ä¼ è¿‡å»çš„æ•°æ®æ²¡æœ‰è¢«ç¯¡æ”¹ï¼›åŠ å¯†çš„ä½œç”¨æ˜¯ä¿è¯æ•°æ®ä¸è¢«çªƒå–ã€‚

æ•°æ®åŠ å¯†ä¸€èˆ¬æ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆå¯†ç å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ï¼Œå…¬é’¥å‘ç»™å‰ç«¯ä¿å­˜ï¼ˆç›¸å½“äºå…¬å¼€äº†å…¬é’¥ï¼‰ï¼Œç§é’¥ç”±æœåŠ¡ç«¯ä¿å­˜ã€‚åœ¨ä¸è€ƒè™‘å…¶ä»–æƒ…å†µä¸‹ï¼Œç§é’¥åŠ å¯†å…¬é’¥è§£å¯†ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œä½†ç”±äºå…¬é’¥çš„ç”Ÿæˆè§„åˆ™ç›¸å¯¹æ¥è¯´â€œä¸å¤ªæ»¡è¶³â€å¯†ç æ ‡å‡†çš„è¦æ±‚ï¼Œå®¹æ˜“è¢«ç ´è§£ï¼Œå› æ­¤åœ¨å®é™…æƒ…å†µä¸‹ä¸å¤ªå¯è¡Œã€‚å‰ç«¯ä¸»è¦å€ŸåŠ© jsencrypt åº“è¿›è¡ŒåŠ å¯†/ç­¾å

å¯¹äºç­¾åï¼Œåˆ™æ˜¯ç”±ç§é’¥æ¥åŠ å¯†ç­¾åï¼Œå…¬é’¥è§£å¯†éªŒç­¾ã€‚å¦‚æœæ˜¯ç”¨å…¬é’¥åŠ å¯†çš„æ–¹å¼å»éªŒç­¾ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“ä¼ªé€ ç­¾åï¼Œå› ä¸ºå…¬é’¥æ˜¯è¿‘ä¹å…¬å¼€çš„

`RSA`åŠ å¯†ä»£ç 

```javascript
// RSAåŠ å¯†
var encrypt = new JSEncrypt()
encrypt.setPublicKey($("#pubkey").val())
var encrypted = encrypt.encrypt($("#input").val())

// RSAè§£å¯†
var decrypt = new JSEncrypt()
decrypt.setPrivateKey($("#privkey").val())
var uncrypted = decrypt.decrypt(encrypted)

// ç­¾å
var sign = new JSEncrypt()
sign.setPrivateKey($("#privkey").val())
var signature = sign.sign($("#input").val(), CryptoJS.SHA256, "sha256")
```

[RSA å®ç°åŸç† ğŸš€]('https://blog.csdn.net/jijianshuai/article/details/80582187')

## MD5 æ‘˜è¦

`MD5`æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼ˆM`D5 Message-Digest Algorithm`ï¼‰ï¼Œæ˜¯åœ¨è®¡ç®—æœºé¢†åŸŸè¢«å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§å“ˆå¸Œç®—æ³•ï¼Œç”¨æ¥å¯¹ä¿¡æ¯è¿›è¡Œå®Œæ•´æ€§ä¿æŠ¤ã€‚`MD5` å°†ä¸€ä¸ªä»»æ„é•¿åº¦çš„æ•°æ®ç»è¿‡ç¼–ç å¾—åˆ°ä¸€ä¸ª 128 ä½ï¼ˆ16 å­—èŠ‚ï¼‰çš„å“ˆå¸Œå€¼ï¼Œå³ä¸º `MD5` å€¼ã€‚äº 1992 å¹´å…¬å¼€ï¼Œç”¨ä»¥å–ä»£ MD4 ç®—æ³•ã€‚

ç‰¹ç‚¹ï¼š

-   å‹ç¼©æ€§ï¼šä»»æ„é•¿åº¦çš„æ•°æ®ï¼Œç®—å‡ºçš„ MD5 å€¼é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ã€‚
-   æ˜“è®¡ç®—ï¼šä»åŸæ•°æ®è®¡ç®—å‡º MD5 å€¼å¾ˆå®¹æ˜“ã€‚
-   æŠ—ä¿®æ”¹æ€§ï¼šå¯¹åŸæ•°æ®è¿›è¡Œä»»ä½•æ”¹åŠ¨ï¼Œå“ªæ€•åªä¿®æ”¹ 1 ä¸ªå­—èŠ‚ï¼Œæ‰€å¾—åˆ°çš„ MD5 å€¼éƒ½æœ‰å¾ˆå¤§åŒºåˆ«ã€‚
-   å¼ºæŠ—ç¢°æ’ï¼šå·²çŸ¥åŸæ•°æ®å’Œå…¶ MD5 å€¼ï¼Œæƒ³æ‰¾åˆ°ä¸€ä¸ªå…·æœ‰ç›¸åŒ MD5 å€¼çš„æ•°æ®ï¼ˆå³ä¼ªé€ æ•°æ®ï¼‰æ˜¯éå¸¸å›°éš¾çš„ã€‚

åº”ç”¨åœºæ™¯ï¼š

-   é˜²ç¯¡æ”¹ï¼Œä¿éšœæ–‡ä»¶ä¼ è¾“å¯é æ€§
-   å¢å¼ºå¯†ç ä¿å­˜çš„å®‰å…¨æ€§
-   æ•°å­—ç­¾å

å®‰å…¨æ€§ï¼š

`MD5`è™½ç„¶è¢«å¹¿æ³›åº”ç”¨ï¼Œä½†ä»å­˜åœ¨å¼±ç‚¹ï¼Œå¯ä»¥è¢«åŠ ä»¥ç ´è§£ï¼Œ`MD5`ç®—æ³•æ— æ³•é˜²æ­¢ç¢°æ’ï¼Œå¹¶å·²æœ‰ç¢°æ’æˆåŠŸæ¡ˆä¾‹ã€‚å¯¹äºéœ€è¦é«˜åº¦å®‰å…¨æ€§çš„æ•°æ®ï¼Œä¸€èˆ¬å»ºè®®æ”¹ç”¨å…¶ä»–ç®—æ³•ï¼Œå¦‚`SHA-2`ç­‰ã€‚ç›®å‰äº’è”ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå­—ç¬¦ä¸²ä¸`MD5`çš„æ•°æ®åº“ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºæ²¡æœ‰åŠ `SALT`çš„`MD5`å€¼ç±»ä¼¼äºè£¸å¥”äº†ï¼ˆ[md5 é€†å‘åŠŸèƒ½ ğŸš€](https://www.md5online.org/)ï¼‰

## ç”Ÿæˆéšæœºå¯†é’¥

```javascript
  getGeneralKey() {
    const str = 'abcdefghijklmnopqrstuvwxyz0123456789'
    // å…ˆç»è¿‡ä¸€å±‚ä¹±åº
    const arr = str.split('').sort(() => (Math.random() > 0.5 ? 1 : -1))
    const keyLen = 32
    const aesKey = []
    // ç„¶åå†éšæœºç”Ÿæˆç§˜é’¥
    for (let i = 0; i < keyLen; i++) {
      const temp = Math.floor(Math.random(0, 1) * 36)
      aesKey.push(arr[temp])
    }
    return aesKey.join('')
  },
```
