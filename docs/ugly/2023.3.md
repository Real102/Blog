# 笔记

## 2023 年 3 月 1 日

### 全局修改 element 主题色

如果项目中需要更改 `element-ui` 主题色，那么可以通过改变其中的 `scss` 变量，大致如下：

```scss
/* 改变主题色变量 */
$--color-primary: teal;

/* 改变 icon 字体路径变量，必需 */
$--font-path: "~element-ui/lib/theme-chalk/fonts";

@import "~element-ui/packages/theme-chalk/src/index";
```

然后再 `main.js` 中替代原有的 `element-ui` 的样式文件引入即可

## 2023 年 3 月 2 日

### vue2 下使用 decorator 提示异常问题

`vue2` 项目中使用装饰器时，可能编辑器会一直爆红，网上一些铁汁说需要增加 `eslint` 配置：

```javascript
parserOptions: {
  ecmaFeatures: {
    legacyDecorators: true
  }
}
```

但实际上 [eslint 文档](https://eslint.bootcss.com/docs/user-guide/configuring#specifying-parser-options) 中并没有这一项配置，因此是不会生效

经查阅，可能出现问题的大致有以下几种原因：

- `eslint`
- `prettier`
- `tsconfig | jsconfig`
- `vscode` 插件

具体造成的原因可以查看 `vscode` 控制台的 `problems`，可能会提示如下情况：

1. `Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option in your 'tsconfig' or 'jsconfig' to remove this warning.`
2. `Property assignment expected.Vetur(1136)`

如果是 `1` 类情况，可以按提示修改 `tsconfig` 或 `jsconfig`，如果是 `2` 类情况，可以考虑关闭 `Vetur` 的配置：`"vetur.validation.script": false`

其他情况暂时没有遇到，但可以具体分析问题具体解决

## 2023 年 3 月 3 日

### 可编辑 div 内插入 DOM 节点

如果是单纯插入 `DOM` 节点，可以考虑基于光标所在位置插入，借助 `range` 实现插入

需要注意一点：当 `div` 内同时包含文本节点和其他元素节点时，获取光标的位置跟单纯文本节点下不一样：光标位置仅基于文本节点下计算，会忽略前面元素节点与文本节点的长度与位置（官方 `csp` 动态模板插入变量中有运用到）

可参考文章：<https://blog.csdn.net/C_fashionCat/article/details/120737287>
