# 笔记

## 2023 年 3 月 1 日

### 全局修改 element 主题色

如果项目中需要更改 `element-ui` 主题色，那么可以通过改变其中的 `scss` 变量，大致如下：

```scss
/* 改变主题色变量 */
$--color-primary: teal;

/* 改变 icon 字体路径变量，必需 */
$--font-path: "~element-ui/lib/theme-chalk/fonts";

@import "~element-ui/packages/theme-chalk/src/index";
```

然后再 `main.js` 中替代原有的 `element-ui` 的样式文件引入即可

## 2023 年 3 月 2 日

### vue2 下使用 decorator 提示异常问题

`vue2` 项目中使用装饰器时，可能编辑器会一直爆红

具体造成的原因可以查看 `vscode` 控制台的 `problems`，可能会提示如下情况：

1. `Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option in your 'tsconfig' or 'jsconfig' to remove this warning.`
2. `Property assignment expected.Vetur(1136)`
3. `Decorators cannot be used to decorate object literal properties.`

如果是 `1` 类情况，可以按提示修改 `tsconfig` 或 `jsconfig`；
如果是 `2` 类情况，可以考虑关闭 `Vetur` 的配置：`"vetur.validation.script": false`；注意需要重开页面才生效
如果是 `3` 类情况，需要在 `.eslintrc.js` 中配置以下代码

```javascript
parserOptions: {
  ecmaFeatures: {
    legacyDecorators: true
  }
}
```

<!-- 但查询 [eslint 文档](https://eslint.bootcss.com/docs/user-guide/configuring#specifying-parser-options) 中并没有这一项配置（但实际上也可能会生效） -->

## 2023 年 3 月 3 日

### 可编辑 div 内插入 DOM 节点

如果是单纯插入 `DOM` 节点，可以考虑基于光标所在位置插入，借助 `range` 实现插入

需要注意一点：当 `div` 内同时包含文本节点和其他元素节点时，获取光标的位置跟单纯文本节点下不一样：光标位置仅基于文本节点下计算，会忽略前面元素节点与文本节点的长度与位置（官方 `csp` 动态模板插入变量中有运用到）

可参考文章：<https://blog.csdn.net/C_fashionCat/article/details/120737287>

## 2023 年 3 月 4 日

### http1.1

**优点**：

- 支持长链接：`http1.0` 仍然是结束一个请求后就会执行四次挥手断开链接操作。`http1.1` 的长链接可以持续请求，在一段时间内没有请求也会主动断开链接
- 管道网络传输：可以理解为，基于长链接发起请求时，不用等上一个请求完成就可以继续发送第二、第三个请求。但实际上服务器仍然是按照发送顺序来执行。如果前面请求未完成那么后续的请求会被阻塞，称之为：**队头阻塞**

**缺点**：

- 无状态：对于 `http1.0` 和 `http1.1` 来说，无状态都即是优点也是缺点。无状态不需要记录任何状态信息以减轻服务器压力，但同样难以验证用户的身份
