# ç¬”è®°

## 2021 å¹´ 11 æœˆ 1 æ—¥

### å¿«é€Ÿåˆ é™¤ node_modulesï¼ˆ1.12 è¡¥ï¼‰

å…¨å±€å®‰è£… `rimraf` æ’ä»¶

```shell
cnpm install rimraf -g
```

ç„¶åè¾“å…¥ä¸‹é¢ä¸€å¥å‘½ä»¤å³å¯ï¼š

```shell
rimraf node_modules
# ç›´æ¥è¾“å…¥ node_modules å³å¯
```

## 2021 å¹´ 11 æœˆ 2 æ—¥

### Vscode è°ƒè¯• Vue é¡¹ç›®ï¼ˆ3.9 è¡¥ï¼‰

åŸºæœ¬æµç¨‹å¯ä»¥ä» `vue` å®˜ç½‘çš„ `Cookbook` å¯ä»¥æŸ¥åˆ°ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹éœ€è¦æ³¨æ„çš„ç‚¹ï¼šéœ€è¦å¼€å¯`source-map`

```javascript
export default {
  configureWebpack: config => {
    config.devtool = "source-map"
    return config
  }
}
```

å‚è€ƒåœ°å€ï¼š

- <https://cn.vuejs.org/v2/cookbook/debugging-in-vscode.html#%E4%BB%8E-VS-Code-%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8>
- <https://juejin.cn/post/7071219293249077256#heading-1>

## 2021 å¹´ 11 æœˆ 3 æ—¥

### å–æ¶ˆ watch ç›‘å¬

`vue` ä¸­çš„ `watch` ç›‘å¬æ˜¯å¯ä»¥å–æ¶ˆçš„ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š

```javascript
const someWatch = this.$watch("attr", () => {}, { options })
someWatch() // å–æ¶ˆç›‘å¬
```

## 2021 å¹´ 11 æœˆ 4 æ—¥

### fixed ç¥–å…ˆ

`position:fixed` çš„å…ƒç´ ä¼šè¢«ç§»å‡ºæ­£å¸¸æ–‡æ¡£æµï¼Œå¹¶ä¸ä¸ºå…ƒç´ é¢„ç•™ç©ºé—´ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡å®šå…ƒç´ ç›¸å¯¹äºå±å¹•è§†å£ï¼ˆ`viewport`ï¼‰çš„ä½ç½®æ¥æŒ‡å®šå…ƒç´ ä½ç½®ã€‚å…ƒç´ çš„ä½ç½®åœ¨å±å¹•æ»šåŠ¨æ—¶ä¸ä¼šæ”¹å˜ã€‚`fixed` å±æ€§ä¼šåˆ›å»ºæ–°çš„å±‚å ä¸Šä¸‹æ–‡ã€‚å½“å…ƒç´ ç¥–å…ˆçš„ `transform`, `perspective` æˆ– `filter` å±æ€§é `none` æ—¶ï¼Œå®¹å™¨ç”±è§†å£æ”¹ä¸ºè¯¥ç¥–å…ˆã€‚

## 2021 å¹´ 11 æœˆ 5 æ—¥

### å¯¹è±¡åŠ¨æ€èµ‹å€¼ ts å†™æ³•

```javascript
  searchData: ISearchData = {
    [propName: string]: any
  }
  this.searchData[someAttr as keyof ISearchData] = someValue as any
```

## 2021 å¹´ 11 æœˆ 6 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 7 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 8 æ—¥

### é¦–å±æ—¶é—´ä¼˜åŒ–--è§†é¢‘

æŠ€æœ¯è¦ç‚¹ï¼š

- è§†é¢‘èµ„æºå‹ç¼©ï¼ˆå°ä¸¸å·¥å…·ç®±ï¼Œå¯ç§»é™¤éŸ³é¢‘ï¼‰
- è§†é¢‘èµ„æºæ ¼å¼è½¬æ¢ä¸º `flv` æ ¼å¼ï¼ˆå€ŸåŠ© `B` ç«™å¼€æºçš„ `flv.js`ï¼‰
- å…¶ä»–éé¦–å±èµ„æºå»¶ååŠ è½½

å®Œæ•´æ–‡æ¡£ï¼š[é¦–å±è§†é¢‘çš„ä¼˜åŒ–è¿‡ç¨‹ ğŸš€](https://segmentfault.com/a/1190000021578572)

### é¦–å±æ—¶é—´&ç™½å±æ—¶é—´

- **ç™½å±æ—¶é—´**ï¼šä»é¡µé¢æ‰“å¼€åˆ°å‡ºç°å†…å®¹æ—¶çš„æ—¶é—´ã€‚æµè§ˆå™¨åªæœ‰åŠ è½½å¹¶è§£æå®Œå¤´éƒ¨èµ„æºæ‰ä¼šçœŸæ­£æ¸²æŸ“é¡µé¢ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è·å–å¤´éƒ¨èµ„æºåŠ è½½å®Œçš„æ—¶åˆ»æ¥è¿‘ä¼¼ï¼ˆç²—ç•¥ï¼‰ç»Ÿè®¡ç™½å±æ—¶é—´

- **é¦–å±æ—¶é—´**ï¼šé¦–å±æ—¶é—´éœ€è¦è€ƒè™‘å„ç§æƒ…å†µå¦‚ï¼šå›¾ç‰‡ã€`iframe`ã€`video` ç­‰ã€‚ä»…æ–‡æœ¬æ—¶ï¼Œé¦–å±æ—¶é—´å³ä¸º `DOMContentLoaded` æ—¶é—´

#### performance API

é‡ç‚¹å…³æ³¨ `performance API`ï¼Œå…¶ä¸­åŒ…å«æœ‰ï¼š`memory`ã€`navigation`ã€`timeOrigin`ã€`timing` å››ä¸ªå±æ€§ã€‚å‡ ä¹éƒ½å¯ä»¥ä»è¿™ä¸ª `API` ä¸­æ‹¿åˆ°ç›¸å…³æ•°å€¼

åˆ†äº«ä¸ªç½‘ä¸Šæœç½—çš„å¥½ä¸œè¥¿ï¼š

```javascript
// å‡ºå¤„ï¼šhttps://juejin.cn/post/6928739992986615816
window.onload = function() {
  var timing = performance.timing
  console.log("å‡†å¤‡æ–°é¡µé¢æ—¶é—´è€—æ—¶: " + timing.fetchStart - timing.navigationStart)
  console.log("redirect é‡å®šå‘è€—æ—¶: " + timing.redirectEnd - timing.redirectStart)
  console.log("Appcache è€—æ—¶: " + timing.domainLookupStart - timing.fetchStart)
  console.log("unload å‰æ–‡æ¡£è€—æ—¶: " + timing.unloadEventEnd - timing.unloadEventStart)
  console.log("DNS æŸ¥è¯¢è€—æ—¶: " + timing.domainLookupEnd - timing.domainLookupStart)
  console.log("TCPè¿æ¥è€—æ—¶: " + timing.connectEnd - timing.connectStart)
  console.log("requestè¯·æ±‚è€—æ—¶: " + timing.responseEnd - timing.requestStart)
  console.log("ç™½å±æ—¶é—´: " + timing.responseStart - timing.navigationStart)
  console.log("è¯·æ±‚å®Œæ¯•è‡³DOMåŠ è½½: " + timing.domInteractive - timing.responseEnd)
  console.log("è§£é‡Šdomæ ‘è€—æ—¶: " + timing.domComplete - timing.domInteractive)
  console.log("ä»å¼€å§‹è‡³loadæ€»è€—æ—¶: " + timing.loadEventEnd - timing.navigationStart)
}
```

å¦å¤–ï¼Œè·å–é¦–å±æ—¶é—´å¯ä»¥ç”¨ `performance.getEntries()` è·å– `first-contentful-paint` çš„æ—¶é—´

#### æ‰‹æ‰“ï¼ˆç½‘å‚ï¼‰ä»£ç 

ç™½å±æ—¶é—´ï¼š

```html
<!-- ä»£ç æ¥æºï¼šhttps://fex.baidu.com/blog/2014/05/build-performance-monitor-in-7-days/ -->
<html>
  <head>
    <meta charset="UTF-8" />
    <script>
      //æµ‹è¯•æ—¶é—´èµ·ç‚¹ï¼Œå®é™…ç»Ÿè®¡èµ·ç‚¹ä¸º DNS æŸ¥è¯¢ï¼Œå³navigationStartæ—¶é—´
      var start_time = +new Date()
    </script>
    <!-- 3s åè¿™ä¸ª js æ‰ä¼šè¿”å› -->
    <script src="script.php"></script>
    <script>
      var end_time = +new Date() //æ—¶é—´ç»ˆç‚¹
      var headtime = end_time - start_time //å¤´éƒ¨èµ„æºåŠ è½½æ—¶é—´
      console.log(headtime)
    </script>
  </head>
  <body>
    <p>åœ¨å¤´éƒ¨èµ„æºåŠ è½½å®Œä¹‹å‰é¡µé¢å°†æ˜¯ç™½å±</p>
    <p>script.php è¢«æ¨¡æ‹Ÿè®¾ç½® 3s åè¿”å›ï¼Œhead åº•éƒ¨å†…åµŒ JS ç­‰å¾…å‰é¢ js è¿”å›åæ‰æ‰§è¡Œ</p>
    <p>script.php æ›¿æ¢æˆä¸€ä¸ªæ‰§è¡Œé•¿æ—¶é—´å¾ªç¯çš„ js æ•ˆæœä¹Ÿä¸€æ ·</p>
  </body>
</html>
```

é¦–å±æ—¶é—´ï¼š

```javascript
// è‡ªå·±ç”¨çš„è°·æ­Œï¼Œæ²¡æœ‰é‚£ä¹ˆä¸¥è°¨ï¼Œä¸èƒ½ç›´æ¥ç”¨navigationStartä½œä¸ºå¼€å§‹æ—¶é—´å“ˆ
// è¿™é‡Œåº”è¯¥åœ¨headæ ‡ç­¾å¼€å§‹æ—¶æ’å…¥ä¸€ä¸ªè·å–æ—¶é—´æˆ³çš„ä»£ç 
let max = 0
let imgs = Array.from(document.getElementsByTagName("img")) // è·å–æ‰€æœ‰çš„å›¾ç‰‡èµ„æº
imgs.forEach(tag => {
  tag.onload = function() {
    // ç›‘å¬æ¯ä¸€ä¸ªå›¾ç‰‡çš„onloadäº‹ä»¶
    imgLoad(tag, tag.classList[0])
  }
})
function imgLoad(target, name) {
  // nameæ²¡å•¥ç”¨ï¼Œæµ‹è¯•çš„æ—¶å€™æ‹¿æ¥å½“åå­—ç”¨äº†
  target.dataset.time = new Date().getTime()
  console.log(name + "åŠ è½½æ—¶é—´ï¼š" + (new Date().getTime() - performance.timing.navigationStart))
  let io = new IntersectionObserver(entries => {
    if (entries[0].intersectionRatio > 0) {
      // è¿‡æ»¤éé¦–å±çš„å›¾ç‰‡
      max = Math.max(max, new Date().getTime())
      console.log(max)
    }
    io.unobserve(target)
  })
  io.observe(target)
}
```

<!-- TODO:  -->

ç–‘é—®ï¼š

- video è§†é¢‘æ˜¯å¦ä¼šå½±å“åˆ°é¦–å±æ—¶é—´ï¼Ÿ

## 2021 å¹´ 11 æœˆ 9 æ—¥

### telepot

æ§åˆ¶æŸä¸ª `HTML` æ¨¡å—ï¼ˆç»„ä»¶ï¼‰æŒ‚è½½åˆ°æŒ‡å®šçš„ `DOM` ä¸‹ã€‚ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `id` æŒ‡å®šæŒ‚è½½çš„ `DOM`ï¼ˆ`to="#target"`ï¼‰ã€‚ä½†éœ€è¦æ³¨æ„ï¼ŒæŒ‚è½½çš„ä½ç½®ä¸ä¼šå½±å“åˆ°åŸå…ˆçš„çˆ¶å­ç»“æ„ï¼Œå³ä¸ä¼šå½±å“çˆ¶ç»„ä»¶çš„æ•°æ®æ³¨å…¥

å¦‚æœæœ‰å¤šä¸ª `teleport` æŒ‚è½½åˆ°åŒä¸€ä¸ªç›®æ ‡ä¸‹ï¼Œ`teleport` å°†ä¼šæŒ‰ç…§å…ˆåé¡ºåºæ’å…¥åˆ°ç›®æ ‡ `DOM` ä¸‹ï¼ˆæ„Ÿè§‰å±‚çº§æ¯”è¾ƒä¹±æˆ–å‡ºç°é—®é¢˜çš„æƒ…å†µä¸‹ä¼šç”¨çš„æ¯”è¾ƒå¤šå§ï¼Œå¦å¤–å…¶å®è·Ÿ `element ui` çš„ `modal-append-to-body` çš„æ•ˆæœå·®ä¸å¤šï¼Œä¸è¿‡ `teleport` å¯ä»¥æŒ‡å®šæŒ‚è½½çš„ `DOM`ï¼‰

```HTML
<teleport to="body">
  <div>
      <h2>teleport</h2>
  </div>
</teleport>
```

## 2021 å¹´ 11 æœˆ 10 æ—¥

### å…¨å±€å¼•å…¥æ–¹å¼

#### å…¨å±€å˜é‡

`vue3` ä¸­ `vue.property` å·²è¢«æ›¿æ¢æˆ `config.globalProperties`ã€‚ç”±äº `composition API` ä¸­çš„ `this` å·²ç»ä¸æ˜¯æˆ‘ä»¬ `vue2` ä¸­è®¤è¯†çš„ `this`ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ `getCurrentInstance()` æ–¹æ³•æ¥è·å–åˆ°å½“å‰å®ä¾‹

æ­¤æ—¶è®¿é—®å…¨å±€å˜é‡çš„æ–¹å¼åˆ™å˜æˆï¼š

```javascript
// main.js
const app = createApp({})
app.config.globalProperties.$http = () => {}

// home.vue
setup() {
  const { $http } = getCurrentInstance().appContext.config.globalProperties
}

```

å°½ç®¡ä½œä¸º `vue.property` çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä½† `vue3` å®˜æ–¹æ–‡æ¡£ä»å»ºè®®ç”¨ `provide` æ›¿ä»£ `globalProperties`

```javascript
// main.js
app.provide('guide', 'Vue 3 Guide')

// home.vue
setup() {
  console.log(inject('guide'))
}
// Warningï¼šinject() can only be used inside setup() or functional components.
```

#### æŒ‡ä»¤ã€ç»„ä»¶ã€æ’ä»¶ç­‰

è¿™é‡Œä»¥ component ç»„ä»¶ä¸ºä¾‹ï¼ˆå…¶ä»–ç±»ä¼¼ï¼‰

```javascript
// /testComp/index.js
// installæ–¹æ³•åŒvue2
import comp from "./index.vue"
export default {
  install: app => {
    app.component("testComp", comp)
  }
}

// main.js
// éœ€è¦useä¸€ä¸‹
import testComp from "./components/testComp"
const app = createApp(App)
app.use(testComp)
```

## 2021 å¹´ 11 æœˆ 11 æ—¥

### æˆ‘æƒ³ä¸åˆ°ç³»åˆ—ä¹‹ -- å›¾ç‰‡çš„ä¼˜åŒ–

ç»™å›¾ç‰‡åŠ ä¸Š widthã€height å±æ€§æœ‰åˆ©äº CLSï¼ˆCumulative Layout Shift ç´¯ç§¯å¸ƒå±€åç§»ï¼‰ä¼˜åŒ–ï¼Œé€šä¿—ä¸€ç‚¹æ¥è¯´å°±æ˜¯å¯ä»¥å‡å°‘é¡µé¢çš„é‡ç»˜å’Œå›æµ

ä¸ºä»€ä¹ˆå¯ä»¥å‡å°‘é¡µé¢é‡ç»˜å’Œå›æµï¼Ÿåœ¨è®¾ç½®äº† widthã€height å±æ€§ä¹‹åï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å›¾åƒçš„å®½é«˜å±æ€§è®¾ç½®å›¾åƒçš„é»˜è®¤å®½é«˜æ¯”ï¼Œå› æ­¤å¼€å‘è€…åªè¦è®¾ç½®äº†å®½é«˜å…¶ä¸­ä¸€ä¸ªçš„æ•°å€¼æ—¶ï¼Œæµè§ˆå™¨ä¾¿èƒ½è®¡ç®—å‡ºå¦å¤–ä¸€ä¸ªçš„æ•°å€¼

```html
<!-- æ³¨æ„æ˜¯ä¸å¸¦å•ä½çš„widthã€heightå€¼ -->
<img src="xxx.png" width="300" height="150" />
```

```css
/* åœ¨è°·æ­Œimgä¼šå¤šäº†è¿™ä¹ˆä¸€ä¸ªé»˜è®¤å±æ€§ï¼š */
img[Attributes Style] {
  width: 313px;
  aspect-ratio: auto 313 / 428;
  height: 428px;
}
```

å‚è€ƒæ–‡æ¡£ï¼š[ä¼˜åŒ– Cumulative Layout Shift ç´¯ç§¯å¸ƒå±€åç§» ğŸš€](https://web.dev/optimize-cls/?utm_source=lighthouse&utm_medium=devtools#images-without-dimensions)

## 2021 å¹´ 11 æœˆ 12 æ—¥

### Event Bus

`vue3` ä¸­å·²åºŸé™¤ `$on`ã€`$off`ã€`$once` å®ä¾‹æ–¹æ³•ï¼Œä¸èƒ½å†åƒ `vue2` ä¸€æ ·ä½¿ç”¨ã€‚ä½† `vue3` ä¹Ÿæä¾›äº†æ›¿æ¢çš„æ–¹æ³•ï¼š[mitt](https://github.com/developit/mitt)ã€[tiny-emitter](https://github.com/scottcorgan/tiny-emitter)

å»ºè®®å°‘ç”¨...

```javascript
// tiny-emitterä½¿ç”¨å¦‚ä¸‹ï¼š
import Emitter from "tiny-emitter"
const emitter = new Emitter()
// ç»‘å®šä¸ºå…¨å±€å¯ç”¨æˆ–provideå…¨å±€æ³¨å…¥
app.config.globalProperties.emitter = emitter

// è§¦å‘ä¸ç›‘å¬äº‹ä»¶
// emitter.on('some-event', function (arg1, arg2, arg3) {})
// emitter.emit('some-event', 'arg1 value', 'arg2 value', 'arg3 value')
```

### $attrsã€$listeners

`vue3` ä¸­å·²ç»åºŸé™¤äº† `$listeners`ï¼Œåœ¨ `vue3` çš„è™šæ‹Ÿ `DOM` ä¸­ï¼Œäº‹ä»¶ç›‘å¬å™¨ç°åœ¨åªæ˜¯ä»¥ `on` ä¸ºå‰ç¼€çš„ `attribute`ï¼Œè¿™æ ·å®ƒå°±æˆä¸ºäº† `$attrs` å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œä¸”å¯ä»¥é€šè¿‡ context.attrs[target] è®¿é—®

```html
<template>
  <label>
    <input type="text" v-bind="$attrs" />
  </label>
</template>
```

## 2021 å¹´ 11 æœˆ 13 æ—¥

### keep-alive

`vue` ç¼“å­˜ç»„ä»¶é€‰é¡¹ï¼Œå¸¸ç”¨äº `router-view` æˆ–åŠ¨æ€ç»„ä»¶

```Vue
<keep-alive>
  <router-view />
</keep-alive>
```

`keep-alive` è¿˜æ”¯æŒä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š

- `include` - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜
- `exclude` - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜
- `max` - æ•°å­—ï¼Œæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹

`include/exclude` åŒ¹é…é¦–å…ˆæ£€æŸ¥ç»„ä»¶è‡ªèº«çš„ `name` é€‰é¡¹ï¼Œå¦‚æœ `name` é€‰é¡¹ä¸å¯ç”¨ï¼Œåˆ™åŒ¹é…å®ƒçš„å±€éƒ¨æ³¨å†Œåç§° (çˆ¶ç»„ä»¶ `components` é€‰é¡¹çš„é”®å€¼)ã€‚åŒ¿åç»„ä»¶ä¸èƒ½è¢«åŒ¹é…

Tipsï¼š`name` å¯¹å¤§å°å†™æ•æ„Ÿ

## 2021 å¹´ 11 æœˆ 14 æ—¥

### vuex-commit

æäº¤ `mutation` æ–¹æ³•ï¼š`commit(type: string, payload?: any, options?: Object)`ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å‚æ•°ï¼š

- `type`ï¼šäº‹ä»¶ç±»å‹ï¼Œå³æäº¤çš„ `mutation` ç±»å‹
- `payload`ï¼šè½½è·ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¼ é€’çš„å‚æ•°
- `options`ï¼šåŒ…å«ä¸€ä¸ªé€‰é¡¹ï¼š`root: true`ï¼Œå®ƒå…è®¸åœ¨å‘½åç©ºé—´æ¨¡å—é‡Œæäº¤æ ¹çš„ `mutation`

## 2021 å¹´ 11 æœˆ 15 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 16 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 17 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 18 æ—¥

### fs.stat(path[, options], callback)

è·å–æŒ‡å®šè·¯å¾„çš„ç»Ÿè®¡ä¿¡æ¯

`callback` åŒ…å«ä¸¤ä¸ªå‚æ•° `err`ã€`stats`ï¼Œ`stats` å³ä¸ºç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ `stats.isDirectory()` åˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹

ä¸æ¨èåœ¨è°ƒç”¨ `fs.open()`ã€`fs.readFile()` æˆ– `fs.writeFile()` ä¹‹å‰ä½¿ç”¨ `fs.stat()` æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚ è€Œæ˜¯ç”¨æˆ·ä»£ç åº”è¯¥ç›´æ¥æ‰“å¼€/è¯»å–/å†™å…¥æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸å¯ç”¨æ—¶å¤„ç†å¼•å‘çš„é”™è¯¯ã€‚

è¦æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨è€Œä¸å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œå»ºè®®ä½¿ç”¨ `fs.access()`ã€‚

## 2021 å¹´ 11 æœˆ 19 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 20 æ—¥

ç¼ºå¸­...

## 2021 å¹´ 11 æœˆ 21 æ—¥

### è·å–ä¾èµ–çš„ç‰ˆæœ¬å·

é€šè¿‡ `package.json` æ‹¿åˆ°ç‰ˆæœ¬å·ã€‚ä¸€è¡Œä»£ç æå®š~

```javascript
const version = require("axios/package.json").version
```

## 2021 å¹´ 11 æœˆ 22 æ—¥

### vue-element-admin åœ¨çº¿æ¢è‚¤åŠŸèƒ½

ä¸»è¦é€»è¾‘ä¸ºï¼šè·å–å½“å‰ `element-ui` ç‰ˆæœ¬ï¼ŒæŒ‡å®šç‰ˆæœ¬ä¸‹è½½ `element-ui` çš„æ ·å¼æ–‡ä»¶ï¼Œè·å–ç”¨æˆ·é€‰æ‹©çš„é¢œè‰²ï¼Œé‡æ–°è®¡ç®—å„ç§ `ThemeCluster`ã€`ShadeColor` ç­‰ï¼Œåˆ©ç”¨æ­£åˆ™å°†æ ·å¼æ–‡ä»¶ä¸­çš„ `css` æ›¿æ¢æˆè®¡ç®—å‡ºæ¥çš„ç»“æœ

ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š

```javascript
if (!this.chalk) {
  // å¦‚æœæ ·å¼æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™é‡æ–°è·å–ä¸€ä»½æŒ‡å®šç‰ˆæœ¬çš„cssæ–‡ä»¶
  const url = `https://unpkg.com/element-ui@${version}/lib/theme-chalk/index.css`
  await this.getCSSString(url, "chalk")
}

const chalkHandler = getHandler("chalk", "chalk-style")

chalkHandler()

// oldVal ä¸ºæ—§çš„ä¸»é¢˜è‰²ï¼Œé»˜è®¤å€¼ä¸º ORIGINAL_THEME
const styles = [].slice.call(document.querySelectorAll("style")).filter(style => {
  const text = style.innerText
  return new RegExp(oldVal, "i").test(text) && !/Chalk Variables/.test(text)
})

styles.forEach(style => {
  const { innerText } = style
  if (typeof innerText !== "string") return
  style.innerText = this.updateStyle(innerText, originalCluster, themeCluster)
})
```

## 2021 å¹´ 11 æœˆ 23 æ—¥

### ç¦æ­¢ input è‡ªåŠ¨è¡¥å…¨

ç‰¹åˆ«æ˜¯è´¦å·å¯†ç è¾“å…¥æ¡†ï¼Œä¸ä»…è‡ªåŠ¨è¡¥å…¨ï¼Œè¿˜æœ‰ä¸‘çš„è¦å‘½çš„èƒŒæ™¯è‰²ï¼Œçœ‹ç€å°±æƒ³å¹²æ‰å®ƒã€‚

ç›¸å…³æ–¹æ³•æµ‹è¯•æƒ…å†µï¼š

- å¦‚æœç›´æ¥ä½¿ç”¨ï¼š`autocomplete="off"`ï¼Œå…¼å®¹æ€§ä¹Ÿä¸å¤ª ok ï¼ˆ[æŸ¥çœ‹å…¼å®¹æ€§](https://caniuse.com/?search=autocomplete)ï¼‰
- é’ˆå¯¹å¯†ç è¾“å…¥æ¡†ä½¿ç”¨ï¼š`autocomplete="new-password"`åŸºæœ¬å¯ä»¥å…¼å®¹
- æ–°å¢ `<input type="password" autocomplete="off" style="position:absolute;top:-9999px;opacity:0" />`ï¼Œå…¼å®¹æ€§ä¸€åŠä¸€åŠï¼Œéƒ¨åˆ†æµè§ˆå™¨ï¼ˆä¸‹è¡¨ Ã— éƒ¨åˆ†ï¼‰`input[text]` ä»ç„¶ä¼šè‡ªåŠ¨å¡«å……
- æ–°å¢ `<input type="password" autocomplete="new-password" style="position:absolute;top:-9999px;opacity:0" />`åŸºæœ¬å¯ä»¥å…¼å®¹ï¼ˆæ³¨æ„ `element-ui` ä¸‹éœ€è¦æ”¾åœ¨ `el-form` ä¸‹æ‰ä¼šç”Ÿæ•ˆï¼‰

|                                         | è°·æ­Œ | ç«ç‹ | edge | opera |
| --------------------------------------- | ---- | ---- | ---- | ----- |
| autocomplete=off                        | Ã—    | âˆš    | Ã—    | Ã—     |
| autocomplete=new-password               | âˆš    | âˆš    | âˆš    | âˆš     |
| æ–°å¢ç©ºç™½ input[password]                | Ã—    | âˆš    | Ã—    | Ã—     |
| æ–°å¢ç©ºç™½ input[password] + new-password | âˆš    | âˆš    | âˆš    | âˆš     |

`åƒä¸‡åˆ«æ‰‹ä¸‹ç•™æƒ…ï¼Œæ·¦å®ƒ`

å¦‚æœåªæ˜¯æƒ³å¹²æ‰èƒŒæ™¯è‰²ï¼Œå¯ä»¥çœ‹[è¿™é‡Œ](https://real102.github.io/Blog/ugly/2021.10.html#%E8%BE%93%E5%85%A5%E6%A1%86%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E6%A0%B7%E5%BC%8F%E4%BC%98%E5%8C%96-11-23-%E8%A1%A5)

## 2021 å¹´ 11 æœˆ 24 æ—¥

### å†…ç½‘ç©¿é€å·¥å…· frpï¼ˆ12.27 è¡¥ï¼‰

éœ€è¦é…ç½®ä¸¤ä¸ªç«¯ï¼šæœåŠ¡ç«¯ `frps` å’Œå®¢æˆ·ç«¯ `frpc`ã€‚

æœåŠ¡ç«¯ `frps` é€šå¸¸éƒ¨ç½²åœ¨å…·æœ‰å…¬ç½‘ `IP` çš„æœºå™¨ä¸Šï¼ˆäº‘æœåŠ¡å™¨ï¼‰ï¼Œå®¢æˆ·ç«¯åˆ™éƒ¨ç½²åœ¨éœ€è¦ç©¿é€çš„æœºå™¨ä¸Šã€‚æ˜ å°„çš„æ˜¯æœ¬åœ° `localhost`ã€‚ç”¨æˆ·é€šè¿‡è®¿é—®æœåŠ¡ç«¯ `frps`ï¼Œç”± `frp` æ ¹æ®ç«¯å£è½¬å‘åˆ°å¯¹åº”çš„å†…ç½‘æœºå™¨ï¼Œä»è€Œå®ç°é€šä¿¡

æ–‡æ¡£åœ°å€ï¼š<https://gofrp.org/docs/examples/ssh/>

å…¶ä»–ç©¿é€å·¥å…·ï¼š`NATAPP`ã€‚

ä¸¤è€…ç›¸æ¯”è¾ƒä¸‹ï¼Œ`frp` çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥è‡ªå®šä¹‰è½¬å‘çš„ç«¯å£ï¼Œè€Œ `NATAPP` åˆ™æ˜¯è‡ªåŠ¨ç”Ÿæˆ `IP` + ç«¯å£ï¼Œå¹¶ä¸”æœ‰å¹¶è¡Œè¿æ¥æ•°ä¸Šé™ï¼ˆå¥½åƒæ˜¯ `5` ä¸ªï¼‰

## 2021 å¹´ 11 æœˆ 25 æ—¥

### splitChunks å° tips

åœ¨æå–å…¬å…± chunk æ—¶ï¼Œä¸»è¦åˆ©ç”¨çš„å°±æ˜¯ä¸€ä¸‹çš„ä¸¤ä¸ªé…ç½®é¡¹ï¼š

`minChunks`ï¼šåŒ…çš„æœ€å°å¼•ç”¨æ¬¡æ•°  
`minSize`ï¼šåŒ…çš„æœ€å°ä½“ç§¯

~~ä½†å®é™…ä¸Šæ¨¡å—åªæœ‰åŒæ—¶æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶æ‰ä¼šè¢«æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„ `chunk` ä¸­å»~~  
åˆ‡å‰²ä»£ç å—ä¸å¦è·Ÿ `chunks` é…ç½®æœ‰å…³

## 2021 å¹´ 11 æœˆ 26 æ—¥

### provide thisï¼ˆ1 æœˆ 2 æ—¥è¡¥ï¼‰

æºè‡ª `element-ui` çš„ä»£ç ï¼š`ElBreadcrumb`ï¼Œå°†çˆ¶ç»„ä»¶çš„ `this` é€šè¿‡ `provide` æ³¨å…¥åˆ°å­å­™ç»„ä»¶ï¼Œå­å­™ç»„ä»¶å†é€šè¿‡è¯¥ `this` è·å–çˆ¶ç»„ä»¶çš„å†…å®¹

ç–‘é—®ï¼šä¸å¯ä»¥é€šè¿‡ `this.$parent` æ¥è®¿é—®çˆ¶ç»„ä»¶å—ï¼Ÿ

```javascript
provide() {
  return {
    elBreadcrumb: this
  };
},
```

```javascript
inject: ['elBreadcrumb'],
mounted() {
  this.separator = this.elBreadcrumb.separator;
  this.separatorClass = this.elBreadcrumb.separatorClass;
}
```

## 2021 å¹´ 11 æœˆ 27 æ—¥

### Network - Timing é¢æ¿ï¼ˆ1.6 è¡¥ï¼‰

æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œé¢æ¿ï¼Œç‚¹å‡»ä»»æ„ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥åœ¨å³ä¾§çœ‹åˆ° `Timing` æ—¶åºé¢æ¿ï¼Œä»¥ä¸‹ä¸ºæ—¶åºé¢æ¿å„é¡¹çš„æè¿°

![Timing](../.vuepress/public/img/timing.png "Timing")

- `Queueing`ï¼šæµè§ˆå™¨åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯¹è¯·æ±‚è¿›è¡Œæ’é˜Ÿï¼šæ›´é«˜ä¼˜å…ˆçº§è¯·æ±‚ï¼›å·²ä¸ºæ­¤æºæ‰“å¼€å…­ä¸ª `TCP` è¿æ¥ï¼ˆä»…é€‚ç”¨äº `HTTP/1.0` å’Œ `HTTP/1.1`ï¼‰ï¼›æµè§ˆå™¨åœ¨ç£ç›˜ç¼“å­˜ä¸­çŸ­æš‚åˆ†é…ç©ºé—´
- `Stalled`ï¼šè¯·æ±‚å¯èƒ½å› æ’é˜Ÿä¸­æè¿°çš„ä»»ä½•åŸå› è€Œåœæ­¢ã€‚
- `DNS Lookup`ï¼šæµè§ˆå™¨æ­£åœ¨è§£æè¯·æ±‚çš„ `IP` åœ°å€ã€‚
- `Initial connection`ï¼šæµè§ˆå™¨æ­£åœ¨å»ºç«‹è¿æ¥ï¼ŒåŒ…æ‹¬ `TCP` æ¡æ‰‹/é‡è¯•å’Œåå•† `SSL`ã€‚
- `Proxy negotiation`ï¼šæµè§ˆå™¨æ­£åœ¨ä¸ä»£ç†æœåŠ¡å™¨åå•†è¯·æ±‚ã€‚
- `Request sent`ï¼šæ­£åœ¨å‘é€è¯·æ±‚ã€‚
- `ServiceWorker Preparation`ï¼šæµè§ˆå™¨æ­£åœ¨å¯åŠ¨ `Service Worker`ã€‚
- `Request to ServiceWorker`ï¼šè¯·æ±‚æ­£åœ¨å‘é€ç»™æœåŠ¡å·¥ä½œè€…ã€‚
- `Waiting (TTFB - Time To First Byte)`ï¼šæµè§ˆå™¨æ­£åœ¨ç­‰å¾…å“åº”çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚æ­¤æ—¶é—´åŒ…æ‹¬ `1` æ¬¡å¾€è¿”å»¶è¿Ÿå’ŒæœåŠ¡å™¨å‡†å¤‡å“åº”æ‰€ç”¨çš„æ—¶é—´ã€‚
- `Content Download`ï¼šæµè§ˆå™¨ç›´æ¥ä»ç½‘ç»œæˆ– `Service Worker` æ¥æ”¶å“åº”ã€‚è¯¥å€¼æ˜¯é˜…è¯»å“åº”æ­£æ–‡æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ã€‚å¤§äºé¢„æœŸçš„å€¼å¯èƒ½è¡¨ç¤ºç½‘ç»œé€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ–è€…æµè§ˆå™¨æ­£å¿™äºæ‰§è¡Œå…¶ä»–å·¥ä½œï¼Œä»è€Œå»¶è¿Ÿäº†å“åº”çš„è¯»å–ã€‚
- `Receiving Push`ï¼šæµè§ˆå™¨æ­£åœ¨é€šè¿‡ `HTTP/2` æœåŠ¡å™¨æ¨é€æ¥æ”¶æ­¤å“åº”çš„æ•°æ®ã€‚
- `Reading Push`ï¼šæµè§ˆå™¨æ­£åœ¨è¯»å–ä¹‹å‰æ¥æ”¶åˆ°çš„æœ¬åœ°æ•°æ®ã€‚

æ–‡æ¡£åœ°å€ï¼š<https://developer.chrome.com/docs/devtools/network/reference/#timing-explanation>

## 2021 å¹´ 11 æœˆ 28 æ—¥

### inline

è®¤è¯†ä¸€ä¸‹ `inline` çš„åºå±±çœŸé¢ç›®

å¦‚æœç»™ `HTML` æ ‡ç­¾å¢åŠ  `display: inline` å±æ€§ï¼Œä¼šå‘ç°å—çº§æ ‡ç­¾å˜æˆäº†è¡Œå†…æ ‡ç­¾ï¼Œè€Œè¡Œå†…æ ‡ç­¾åˆ™ä¿æŒåŸæ ·ï¼Œå¹¶ä¸”éƒ½ â€œå¤±å»â€ äº†å®½å’Œé«˜ï¼Œä¼¼ä¹å˜æˆäº†çœŸæ­£çš„è¡Œå†…æ ‡ç­¾ã€‚è¿™ç§æƒ…å†µä¼šå‡ºç°åœ¨é™¤äº† `img`ã€`video` å¤–çš„å…¶ä»–æ ‡ç­¾ï¼ˆæš‚æ—¶çŸ¥é“çš„ï¼Œå¯èƒ½ä¼šæœ‰å…¶ä»–ï¼‰

`display: inline` è¿˜ä¼šå—åˆ° [vertical-align ğŸš€](https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align) çš„å½±å“ï¼ˆå†…è”å…ƒç´ çš„å¯¹é½æ–¹å¼ç”±å±æ€§ `vertical-align` å†³å®šï¼‰ï¼Œé»˜è®¤ä¼šä»¥ `baseline`ï¼ˆçˆ¶å…ƒç´ åŸºçº¿ï¼‰å±•ç¤ºã€‚å½“çˆ¶å…ƒç´ æœ‰ä¸€å®šé«˜åº¦ï¼Œå¹¶ä¸”åŒ…å«å›¾ç‰‡å’Œæ–‡å­—ä¸¤ç§å½¢å¼çš„æ—¶å€™ï¼Œä¼šå‘ç°ä¸¤è€…æ˜¯æ²¡æœ‰å¯¹é½çš„ï¼Œä¹Ÿå°±æ˜¯ `vertical-align` çš„é»˜è®¤å€¼å¯¼è‡´ï¼Œå› æ­¤éœ€è¦è‡ªå·±æ‰‹åŠ¨æ¥è°ƒæ•´

å› æ­¤ï¼Œåœ¨ä½¿ç”¨ `inline` å±æ€§çš„æ—¶å€™éœ€è¦å¤šåŠ å°å¿ƒï¼Œé¿å…è¸©é›·ï¼š

- `inline` å±æ€§ä¼šå¯¼è‡´å®½é«˜å¤±æ•ˆ
- `inline` å±æ€§ä¼šå—åˆ° `vertical-alignï¼šbaseline` çš„å½±å“
- æ³¨æ„æ–‡æœ¬æ˜¯å¦å·²ç»å¯¹é½

### inline-block

è®¤è¯†ä¸€ä¸‹ `inline-block` é»‘çº±ä¸‹çš„é¢å®¹

ç°æœ‰ä»¥ä¸‹è¿™ä¹ˆä¸€ä¸ª `HTML` ç»“æ„ï¼Œå¦‚æœç»™æ‰€æœ‰ `span` æ ‡ç­¾åŠ ä¸Š `inline-block` å±æ€§åï¼Œåº”è¯¥éƒ½çŸ¥é“ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼š`span` éƒ½æ’åˆ—åœ¨ä¸€è¡Œï¼Œå¹¶ä¸”æ¯ä¸ª `span` ä¹‹é—´æœ‰ä¸ªé—´éš”

è¿™æ˜¯ç”±**ç©ºç™½ç¬¦**å¯¼è‡´ï¼Œæ¯”å¦‚ï¼šç©ºæ ¼(U+0020)ã€åˆ¶è¡¨ç¬¦(U+0009)ã€æ¢è¡Œ(U+000A)ã€å›è½¦(U+000D)ã€æ¢é¡µ(U+000C)ç­‰åœ¨æ–‡æ¡£ä¸­ï¼Œäº§ç”Ÿçš„è¡¨ç°å½¢å¼å³ä¸ºç©ºç™½ç¬¦

```html
<div>
  <span>111</span>
  <span>222</span>
  <span>333</span>
  <span>444</span>
  <span>555</span>
</div>
```

å±•ç°æ•ˆæœå¦‚ä¸‹ï¼š

![inline-block](../.vuepress/public/img/inline-block.png "inline-block")

å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼š

1. è®¾ç½®çˆ¶å…ƒç´ çš„ `font-size` ä¸º `0`ï¼Œå¯ä»¥è¾¾åˆ°æ¶ˆé™¤é—´éš™çš„æ•ˆæœï¼Œä½†éœ€è¦å¯¹æ¯ä¸€ä¸ªå†…è”å…ƒç´ è®¾ç½® `font-size`
2. æ¶ˆé™¤å†…è”æ ‡ç­¾ä¹‹é—´çš„æ¢è¡Œç¬¦ã€ç©ºæ ¼ç¬¦ç­‰ï¼ˆä½†ä»£ç ä¼šå˜å¾—å¾ˆä¸ç¾è§‚ï¼Œä¸å¤ªå»ºè®®...ï¼‰
3. å…¶ä»–ä½¿ç”¨ letter-spacing æˆ– word-spacing çš„æ„Ÿè§‰ä¸å¤ª ok

å‚è€ƒæ–‡æ¡£åœ°å€ï¼š[https://github.com/XXHolic/blog/issues/13 ğŸš€](https://github.com/XXHolic/blog/issues/13)

## 2021 å¹´ 11 æœˆ 29 æ—¥

### è®¤è¯†é«˜é˜¶å‡½æ•°

`é«˜é˜¶å‡½æ•°`ï¼šæ˜¯ä¸€ä¸ªæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°æˆ–å°†å‡½æ•°ä½œä¸ºè¾“å‡ºè¿”å›çš„å‡½æ•°ã€‚

é€šä¿—ä¸€ç‚¹å°±æ˜¯ï¼Œå°†å‡½æ•°å½“è¾“å…¥æˆ–è¾“å‡ºçš„å‡½æ•°...

å¯èƒ½å¬èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹ç»•ï¼Œä¸è¿‡å¹³æ—¶æˆ‘ä»¬ä¹Ÿè‚¯å®šæˆ–å¤šæˆ–å°‘ç”¨è¿‡é«˜é˜¶å‡½æ•°ï¼š

- `Array.prototype.map`
- `Array.prototype.filter`
- `Array.prototype.reduce`

```javascript
const array1 = [1, 2, 3, 4]
const reducer = (previousValue, currentValue) => previousValue + currentValue

console.log(array1.reduce(reducer))
// expected output: 10
```

## 2021 å¹´ 11 æœˆ 30 æ—¥

### å˜é‡æå‡

`ES6` æ–°å¢äº† `let` å’Œ `const` å‘½ä»¤ï¼ŒåŠ ä¸Š `var` æ€»å…±ä¸‰ç§å®šä¹‰å˜é‡çš„æ–¹å¼

å…¶ä¸­ `var` å­˜åœ¨å˜é‡æå‡ï¼Œä¹Ÿå°±æ˜¯åœ¨å®šä¹‰å˜é‡å‰å¯ä»¥è®¿é—®ï¼Œä¸”å€¼ä¸º `undefined`

```javascript
console.log(str) // undefined
var str = "string"
console.log(str) // string
```

è€Œå¯¹äº `let` å’Œ `const` å‘½ä»¤ï¼Œåˆ™æ²¡æœ‰å˜é‡æå‡ã€‚åœ¨å®šä¹‰å˜é‡å‰è®¿é—®è¯¥å˜é‡ä¼šç›´æ¥æŠ¥é”™

> `ES6` æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨ `let` å’Œ `const` å‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚

å‡½æ•°ä¹Ÿæœ‰å˜é‡æå‡ï¼Œå¹¶ä¸”**ä¼˜å…ˆçº§æ˜¯é«˜äºå˜é‡**ã€‚ä½†éœ€è¦æ³¨æ„å‡½æ•°ä¸åŒçš„å®šä¹‰æ–¹å¼ä¹Ÿä¼šæœ‰åŒºåˆ«

```javascript
console.log(getName) // Æ’ getName() { console.log("getName") }
function getName() {
  console.log("getName")
}

console.log(getAge) // undefined
// å¯¹è±¡å­—é¢é‡æ–¹å¼å®šä¹‰å‡½æ•°ï¼Œä¼šå°†getAgeå…ˆæå‡ï¼Œåˆå§‹åŒ–ä¸ºundefinedï¼Œ
// ç„¶åå†æ‰§è¡Œfunctionçš„èµ‹å€¼æ“ä½œã€‚æ‰€ä»¥è¿™ç§å‡½æ•°çš„æå‡ä¸ä¼šåœ¨æœ€å‰é¢
var getAge = function() {
  console.log("getAge")
}
```
